(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["CustomDimensions"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["CustomDimensions"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/CustomDimensions/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"CustomDimensionsStore",(function(){return d})),n.d(t,"Edit",(function(){return P})),n.d(t,"List",(function(){return pe})),n.d(t,"Manage",(function(){return Ne})),"undefined"!==typeof window){var i=window.document.currentScript,o=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var s=n("8bbf"),a=n("19dc");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var m=function(){function e(){var t=this;c(this,e),u(this,"privateState",Object(s["reactive"])({customDimensions:[],availableScopes:[],extractionDimensions:[],isLoading:!1,isUpdating:!1})),u(this,"state",Object(s["computed"])((function(){return Object(s["readonly"])(t.privateState)}))),u(this,"isLoading",Object(s["computed"])((function(){return t.state.value.isLoading}))),u(this,"isUpdating",Object(s["computed"])((function(){return t.state.value.isUpdating}))),u(this,"extractionDimensions",Object(s["computed"])((function(){return t.state.value.extractionDimensions}))),u(this,"extractionDimensionsOptions",Object(s["computed"])((function(){return t.extractionDimensions.value.map((function(e){return{key:e.value,value:e.name}}))}))),u(this,"availableScopes",Object(s["computed"])((function(){return t.state.value.availableScopes}))),u(this,"customDimensions",Object(s["computed"])((function(){return t.state.value.customDimensions}))),u(this,"customDimensionsById",Object(s["computed"])((function(){var e={};return t.customDimensions.value.forEach((function(t){e["".concat(t.idcustomdimension)]=t})),e}))),u(this,"reloadPromise",null)}return l(e,[{key:"reload",value:function(){return this.privateState.customDimensions=[],this.privateState.availableScopes=[],this.privateState.extractionDimensions=[],this.reloadPromise=null,this.fetch()}},{key:"fetch",value:function(){var e=this;return this.reloadPromise||(this.privateState.isLoading=!0,this.reloadPromise=Promise.all([this.fetchConfiguredCustomDimensions(),this.fetchAvailableExtractionDimensions(),this.fetchAvailableScopes()]).finally((function(){e.privateState.isLoading=!1}))),this.reloadPromise}},{key:"fetchConfiguredCustomDimensions",value:function(){var e=this;return a["AjaxHelper"].fetch({method:"CustomDimensions.getConfiguredCustomDimensions",filter_limit:"-1"}).then((function(t){e.privateState.customDimensions=t}))}},{key:"fetchAvailableExtractionDimensions",value:function(){var e=this;return a["AjaxHelper"].fetch({method:"CustomDimensions.getAvailableExtractionDimensions",filter_limit:"-1"}).then((function(t){e.privateState.extractionDimensions=t}))}},{key:"fetchAvailableScopes",value:function(){var e=this;return a["AjaxHelper"].fetch({method:"CustomDimensions.getAvailableScopes",filter_limit:"-1"}).then((function(t){e.privateState.availableScopes=t}))}},{key:"createOrUpdateDimension",value:function(e,t){var n=this;return this.privateState.isUpdating=!0,a["AjaxHelper"].post({method:t,scope:e.scope,idDimension:e.idcustomdimension,idSite:e.idsite,name:e.name,active:e.active?"1":"0",caseSensitive:e.case_sensitive?"1":"0"},{extractions:e.extractions}).finally((function(){n.privateState.isUpdating=!1}))}}]),e}(),d=new m,p={class:"editCustomDimension"},b={class:"loadingPiwik"},v=Object(s["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif"},null,-1),f={class:"row form-group"},j={class:"col s12"},O={class:"col s12 m6"},h={class:"row"},D={class:"col s12 m6"},C={class:"col s12 m6"},g={class:"col s12"},V=["onClick"],E={class:"row"},N={class:"col s12"},S={class:"col s12 m6 form-help"},y=["value","disabled"],x=["value","disabled"],w={class:"btn cancel",type:"button",href:"#list"},k={class:"alert alert-info howToTrackInfo"},T=["innerHTML"],_=["innerHTML"],M=["innerHTML"],U=["innerHTML"];function B(e,t,n,i,o,a){var c=Object(s["resolveComponent"])("Field"),r=Object(s["resolveComponent"])("ContentBlock"),l=Object(s["resolveDirective"])("copy-to-clipboard");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",p,[Object(s["createVNode"])(r,{"content-title":e.contentTitleText},{default:Object(s["withCtx"])((function(){var n;return[Object(s["withDirectives"])(Object(s["createElementVNode"])("p",null,[Object(s["createElementVNode"])("span",b,[v,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("General_LoadingData")),1)])],512),[[s["vShow"],e.isLoading||e.isUpdating]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("div",null,[Object(s["createElementVNode"])("form",{onSubmit:t[4]||(t[4]=Object(s["withModifiers"])((function(t){return e.edit?e.updateCustomDimension():e.createCustomDimension()}),["prevent"]))},[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(c,{uicontrol:"text",name:"name",modelValue:e.dimension.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.dimension.name=t}),maxlength:255,required:!0,title:e.translate("General_Name"),"inline-help":e.translate("CustomDimensions_NameAllowedCharacters")},null,8,["modelValue","title","inline-help"])]),Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(c,{uicontrol:"checkbox",name:"active",modelValue:e.dimension.active,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dimension.active=t}),title:e.translate("CorePluginsAdmin_Active"),"inline-help":e.translate("CustomDimensions_CannotBeDeleted")},null,8,["modelValue","title","inline-help"])]),Object(s["withDirectives"])(Object(s["createElementVNode"])("div",f,[Object(s["createElementVNode"])("h3",j,Object(s["toDisplayString"])(e.translate("CustomDimensions_ExtractValue")),1),Object(s["createElementVNode"])("div",O,[(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(e.dimension.extractions,(function(n,i){return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{class:Object(s["normalizeClass"])("".concat(i,"extraction ")),key:i},[Object(s["createElementVNode"])("div",h,[Object(s["createElementVNode"])("div",D,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(c,{uicontrol:"select",name:"".concat(i,"dimension"),modelValue:n.dimension,"onUpdate:modelValue":function(e){return n.dimension=e},"full-width":!0,options:e.extractionDimensionsOptions},null,8,["name","modelValue","onUpdate:modelValue","options"])])]),Object(s["createElementVNode"])("div",C,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(c,{uicontrol:"text",name:"".concat(i,"pattern"),modelValue:n.pattern,"onUpdate:modelValue":function(e){return n.pattern=e},"full-width":!0,title:"urlparam"===n.dimension?e.translate("CustomDimensions_UrlQueryStringParameter"):"eg. /blog/(.*)/"},null,8,["name","modelValue","onUpdate:modelValue","title"])])]),Object(s["createElementVNode"])("div",g,[Object(s["withDirectives"])(Object(s["createElementVNode"])("span",{class:"icon-plus",onClick:t[2]||(t[2]=function(t){return e.addExtraction()})},null,512),[[s["vShow"],n.pattern]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",{class:"icon-minus",onClick:function(t){return e.removeExtraction(i)}},null,8,V),[[s["vShow"],e.dimension.extractions.length>1]])])])],2)})),128)),Object(s["createElementVNode"])("div",E,[Object(s["createElementVNode"])("div",N,[Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createVNode"])(c,{uicontrol:"checkbox",name:"casesensitive",modelValue:e.dimension.case_sensitive,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.dimension.case_sensitive=t}),title:e.translate("Goals_CaseSensitive")},null,8,["modelValue","title"]),[[s["vShow"],null===(n=e.dimension.extractions[0])||void 0===n?void 0:n.pattern]])])])])]),Object(s["createElementVNode"])("div",S,Object(s["toDisplayString"])(e.translate("CustomDimensions_ExtractionsHelp")),1)],512),[[s["vShow"],e.doesScopeSupportExtraction]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{class:"btn update",type:"submit",value:e.translate("General_Update"),disabled:e.isUpdating,style:{"margin-right":"3.5px"}},null,8,y),[[s["vShow"],e.edit]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{class:"btn create",type:"submit",value:e.translate("General_Create"),disabled:e.isUpdating,style:{"margin-right":"3.5px"}},null,8,x),[[s["vShow"],e.create]]),Object(s["createElementVNode"])("a",w,Object(s["toDisplayString"])(e.translate("General_Cancel")),1)],32),Object(s["withDirectives"])(Object(s["createElementVNode"])("div",k,[Object(s["createElementVNode"])("strong",null,Object(s["toDisplayString"])(e.translate("CustomDimensions_HowToTrackManuallyTitle")),1),Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("CustomDimensions_HowToTrackManuallyViaJs")),1),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("pre",null,[Object(s["createElementVNode"])("code",{innerHTML:e.$sanitize(e.manuallyTrackCodeViaJs(e.dimension))},null,8,T)],512),[[l,{}]])]),Object(s["createElementVNode"])("p",{innerHTML:e.$sanitize(e.howToTrackManuallyText)},null,8,_),Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("CustomDimensions_HowToTrackManuallyViaPhp")),1),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("pre",null,[Object(s["createElementVNode"])("code",{innerHTML:e.$sanitize(e.manuallyTrackCodeViaPhp(e.dimension))},null,8,M)],512),[[l,{}]])]),Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("CustomDimensions_HowToTrackManuallyViaHttp")),1),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("pre",null,[Object(s["createElementVNode"])("code",{innerHTML:e.$sanitize(e.manuallyTrackCode)},null,8,U)],512),[[l,{}]])])],512),[[s["vShow"],e.edit]])],512),[[s["vShow"],!e.isLoading]])]})),_:1},8,["content-title"])])}var L=n("a5a2");
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function A(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}var H="customdimensions",I=Object(s["defineComponent"])({props:{dimensionId:Number,dimensionScope:{type:String,required:!0}},components:{ContentBlock:a["ContentBlock"],Field:L["Field"]},directives:{CopyToClipboard:a["CopyToClipboard"]},data:function(){return{dimension:{extractions:[]},isUpdatingDim:!1}},created:function(){this.init()},watch:{dimensionId:function(){this.init()}},methods:{removeAnyCustomDimensionNotification:function(){a["NotificationsStore"].remove(H)},showNotification:function(e,t){a["NotificationsStore"].show({message:e,context:t,id:H,type:"transient"})},init:function(){var e=this;null!==this.dimensionId&&this.removeAnyCustomDimensionNotification(),d.fetch().then((function(){if(e.edit&&e.dimensionId){var t=d.customDimensionsById.value[e.dimensionId];if(!t)return void a["MatomoUrl"].updateHashToUrl("/list");e.dimension=Object(a["clone"])(t),e.dimension&&!e.dimension.extractions.length&&e.addExtraction()}else e.create&&(e.dimension={idsite:a["Matomo"].idSite,name:"",active:!1,extractions:[],scope:e.dimensionScope,case_sensitive:!0},e.addExtraction())}))},removeExtraction:function(e){e>-1&&this.dimension.extractions.splice(e,1)},addExtraction:function(){this.doesScopeSupportExtraction&&this.dimension.extractions.push({dimension:"url",pattern:""})},createCustomDimension:function(){var e=this;this.isUpdatingDim=!0,d.createOrUpdateDimension(this.dimension,"CustomDimensions.configureNewCustomDimension").then((function(){e.showNotification(Object(a["translate"])("CustomDimensions_DimensionCreated"),"success"),d.reload(),a["MatomoUrl"].updateHashToUrl("/list")})).finally((function(){e.isUpdatingDim=!1}))},updateCustomDimension:function(){var e=this;this.isUpdatingDim=!0,d.createOrUpdateDimension(this.dimension,"CustomDimensions.configureExistingCustomDimension").then((function(){e.showNotification(Object(a["translate"])("CustomDimensions_DimensionUpdated"),"success"),d.reload(),a["MatomoUrl"].updateHashToUrl("/list")})).finally((function(){e.isUpdatingDim=!1}))},manuallyTrackCodeViaJs:function(e){return"_paq.push(['setCustomDimension', ".concat(e.idcustomdimension,", ")+"'".concat(Object(a["translate"])("CustomDimensions_ExampleValue"),"']);")},manuallyTrackCodeViaPhp:function(e){return"$tracker->setCustomDimension('".concat(e.idcustomdimension,"', ")+"'".concat(Object(a["translate"])("CustomDimensions_ExampleValue"),"');")}},computed:{isLoading:function(){return d.isLoading.value},isUpdating:function(){return d.isUpdating.value||this.isUpdatingDim},create:function(){return 0===this.dimensionId},edit:function(){return!this.create},extractionDimensionsOptions:function(){return d.extractionDimensionsOptions.value},availableScopes:function(){return d.availableScopes.value},doesScopeSupportExtraction:function(){var e,t=this;if(null===(e=this.dimension)||void 0===e||!e.scope||!this.availableScopes)return!1;var n=this.availableScopes.find((function(e){return e.value===t.dimension.scope}));return null===n||void 0===n?void 0:n.supportsExtractions},contentTitleText:function(){var e;return Object(a["translate"])("CustomDimensions_ConfigureDimension",A(this.dimensionScope),"".concat((null===(e=this.dimension)||void 0===e?void 0:e.index)||""))},howToTrackManuallyText:function(){var e="https://developer.piwik.org/guides/tracking-javascript-guide#custom-dimensions";return Object(a["translate"])("CustomDimensions_HowToTrackManuallyViaJsDetails",'<a target=_blank href="'.concat(e,'" rel="noreferrer noopener">'),"</a>")},manuallyTrackCode:function(){var e=Object(a["translate"])("CustomDimensions_ExampleValue");return"&dimension".concat(this.dimension.idcustomdimension,"=").concat(e)}}});I.render=B;var P=I,q=["innerHTML"],z={class:"loadingPiwik"},G=Object(s["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif"},null,-1),$={class:"index"},F={class:"name"},J={class:"active"},Q={class:"action"},X={colspan:"5"},Y={class:"index"},K={class:"name"},R={class:"extractions"},W={class:"active"},Z={class:"action"},ee=["href"],te={class:"tableActionBar"},ne=["disabled","onClick"],ie=Object(s["createElementVNode"])("span",{class:"icon-add"},null,-1),oe={class:"info"};function se(e,t,n,i,o,a){var c=Object(s["resolveComponent"])("EnrichedHeadline"),r=Object(s["resolveComponent"])("ContentBlock"),l=Object(s["resolveDirective"])("content-intro"),u=Object(s["resolveDirective"])("content-table");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",null,[Object(s["createElementVNode"])("h2",null,[Object(s["createVNode"])(c,null,{default:Object(s["withCtx"])((function(){return[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("CustomDimensions_CustomDimensions")),1)]})),_:1})]),Object(s["createElementVNode"])("p",{innerHTML:e.$sanitize(e.contentIntroText)},null,8,q),Object(s["withDirectives"])(Object(s["createElementVNode"])("p",null,[Object(s["createElementVNode"])("span",z,[G,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("General_LoadingData")),1)])],512),[[s["vShow"],e.isLoading]])],512),[[l]]),(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(e.availableScopes,(function(t){return Object(s["withDirectives"])((Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{key:t.value},[Object(s["createVNode"])(r,{"content-title":e.translate("CustomDimensions_ScopeTitle".concat(e.ucfirst(t.value)))},{default:Object(s["withCtx"])((function(){return[Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("CustomDimensions_ScopeDescription".concat(e.ucfirst(t.value))))+" "+Object(s["toDisplayString"])(e.translate("CustomDimensions_ScopeDescription".concat(e.ucfirst(t.value),"MoreInfo"))),1),Object(s["withDirectives"])(Object(s["createElementVNode"])("table",null,[Object(s["createElementVNode"])("thead",null,[Object(s["createElementVNode"])("tr",null,[Object(s["createElementVNode"])("th",$,Object(s["toDisplayString"])(e.translate("General_Id")),1),Object(s["createElementVNode"])("th",F,Object(s["toDisplayString"])(e.translate("General_Name")),1),Object(s["withDirectives"])(Object(s["createElementVNode"])("th",{class:"extractions"},Object(s["toDisplayString"])(e.translate("CustomDimensions_Extractions")),513),[[s["vShow"],t.supportsExtractions]]),Object(s["createElementVNode"])("th",J,Object(s["toDisplayString"])(e.translate("CorePluginsAdmin_Active")),1),Object(s["createElementVNode"])("th",Q,Object(s["toDisplayString"])(e.translate("General_Action")),1)])]),Object(s["createElementVNode"])("tbody",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("tr",null,[Object(s["createElementVNode"])("td",X,Object(s["toDisplayString"])(e.translate("CustomDimensions_NoCustomDimensionConfigured")),1)],512),[[s["vShow"],0===t.numSlotsUsed&&!e.isLoading]]),(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(e.sortedCustomDimensionsByScope[t.value],(function(e){var n;return Object(s["openBlock"])(),Object(s["createElementBlock"])("tr",{class:Object(s["normalizeClass"])(["customdimension",e.idcustomdimension]),key:e.idcustomdimension},[Object(s["createElementVNode"])("td",Y,Object(s["toDisplayString"])(e.idcustomdimension),1),Object(s["createElementVNode"])("td",K,Object(s["toDisplayString"])(e.name),1),Object(s["withDirectives"])(Object(s["createElementVNode"])("td",R,[Object(s["createElementVNode"])("span",{class:Object(s["normalizeClass"])({"icon-ok":null===(n=e.extractions[0])||void 0===n?void 0:n.pattern})},null,2)],512),[[s["vShow"],t.supportsExtractions]]),Object(s["createElementVNode"])("td",W,[Object(s["createElementVNode"])("span",{class:Object(s["normalizeClass"])({"icon-ok":e.active})},null,2)]),Object(s["createElementVNode"])("td",Z,[Object(s["createElementVNode"])("a",{class:"table-action icon-edit",href:"#?idDimension=".concat(e.idcustomdimension,"&scope=").concat(t.value)},null,8,ee)])],2)})),128))])],512),[[u]]),Object(s["createElementVNode"])("div",te,[Object(s["withDirectives"])(Object(s["createElementVNode"])("button",{class:"btn",disabled:!t.numSlotsLeft,onClick:function(n){return e.addDimension(t.value)}},[ie,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("CustomDimensions_ConfigureNewDimension"))+" ",1),Object(s["createElementVNode"])("span",oe,"("+Object(s["toDisplayString"])(e.translate("CustomDimensions_XofYLeft",t.numSlotsLeft,t.numSlotsAvailable))+")",1)],8,ne),[[s["vShow"],!e.isLoading]])])]})),_:2},1032,["content-title"])],512)),[[s["vShow"],!e.isLoading]])})),128))])}function ae(e){return ue(e)||le(e)||re(e)||ce()}function ce(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(e,t){if(e){if("string"===typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function le(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ue(e){if(Array.isArray(e))return me(e)}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var de=Object(s["defineComponent"])({name:"listcustomdimensions",components:{EnrichedHeadline:a["EnrichedHeadline"],ContentBlock:a["ContentBlock"]},directives:{ContentIntro:a["ContentIntro"],ContentTable:a["ContentTable"]},created:function(){d.fetch()},methods:{ucfirst:function(e){return A(e)},addDimension:function(e){a["MatomoUrl"].updateHashToUrl("/?idDimension=0&scope=".concat(e))}},computed:{isLoading:function(){return d.isLoading.value},availableScopes:function(){return d.availableScopes.value},contentIntroText:function(){var e=Object(a["translate"])("CustomDimensions_CustomDimensionsIntroNext",'<a target=_blank href="https://piwik.org/docs/custom-variables">',"</a>",'<a target=_blank href="https://piwik.org/faq/general/faq_21117">',"</a>"),t=Object(a["translate"])("CustomDimensions_CustomDimensionsIntro",'<a target=_blank href="https://piwik.org/docs/custom-dimensions">',"</a>",this.siteName);return"".concat(e).concat(t)},customDimensions:function(){return d.customDimensions.value},sortedCustomDimensions:function(){var e=ae(this.customDimensions);return e.sort((function(e,t){var n=parseInt("".concat(e.idcustomdimension),10),i=parseInt("".concat(t.idcustomdimension),10);return n-i})),e},sortedCustomDimensionsByScope:function(){var e={};return this.sortedCustomDimensions.reduce((function(e,t){return e[t.scope]=e[t.scope]||[],e[t.scope].push(t),e}),e),e},siteName:function(){return a["Matomo"].helper.htmlDecode(a["Matomo"].siteName)}}});de.render=se;var pe=de,be={class:"manageCustomDimensions"},ve={key:0},fe=Object(s["createElementVNode"])("br",null,null,-1),je=Object(s["createElementVNode"])("br",null,null,-1),Oe=Object(s["createElementVNode"])("br",null,null,-1),he=Object(s["createElementVNode"])("br",null,null,-1),De=["textContent"],Ce=["textContent"],ge={key:1};function Ve(e,t,n,i,o,a){var c=Object(s["resolveComponent"])("CustomDimensionsList"),r=Object(s["resolveComponent"])("ContentBlock"),l=Object(s["resolveComponent"])("CustomDimensionsEdit"),u=Object(s["resolveDirective"])("copy-to-clipboard");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",be,[e.editMode?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",ve,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(c)]),Object(s["createVNode"])(r,{id:"customDimensionsCreateMoreDimensions","content-title":e.translate("CustomDimensions_IncreaseAvailableCustomDimensionsTitle")},{default:Object(s["withCtx"])((function(){return[Object(s["createElementVNode"])("p",null,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("CustomDimensions_IncreaseAvailableCustomDimensionsTakesLong"))+" ",1),fe,je,Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("CustomDimensions_HowToCreateCustomDimension"))+" ",1),Oe,he]),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("pre",null,[Object(s["createElementVNode"])("code",{textContent:Object(s["toDisplayString"])(e.addCustomDimCode)},null,8,De)],512),[[u,{}]])]),Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("CustomDimensions_HowToManyCreateCustomDimensions"))+" "+Object(s["toDisplayString"])(e.translate("CustomDimensions_ExampleCreateCustomDimensions",5)),1),Object(s["createElementVNode"])("div",null,[Object(s["withDirectives"])(Object(s["createElementVNode"])("pre",null,[Object(s["createElementVNode"])("code",{textContent:Object(s["toDisplayString"])(e.addMultipleCustomDimCode)},null,8,Ce)],512),[[u,{}]])])]})),_:1},8,["content-title"])])),e.editMode?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",ge,[Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(l,{"dimension-id":e.dimensionId,"dimension-scope":e.dimensionScope},null,8,["dimension-id","dimension-scope"])])])):Object(s["createCommentVNode"])("",!0)])}var Ee=Object(s["defineComponent"])({components:{CustomDimensionsList:pe,ContentBlock:a["ContentBlock"],CustomDimensionsEdit:P},directives:{CopyToClipboard:a["CopyToClipboard"]},data:function(){return{editMode:!1,dimensionId:null,dimensionScope:""}},created:function(){var e=this;Object(s["watch"])((function(){return a["MatomoUrl"].hashParsed.value}),(function(){e.initState()})),this.initState()},methods:{getValidDimensionScope:function(e){return-1!==["action","visit"].indexOf(e)?e:""},initState:function(){var e=a["MatomoUrl"].hashParsed.value.idDimension;if(e){var t=this.getValidDimensionScope(a["MatomoUrl"].hashParsed.value.scope);if("0"===e){var n={isAllowed:!0,scope:t};if(a["Matomo"].postEvent("CustomDimensions.initAddDimension",n),n&&!n.isAllowed)return this.editMode=!1,this.dimensionId=null,void(this.dimensionScope="")}this.editMode=!0,this.dimensionId=parseInt(e,10),this.dimensionScope=t}else this.editMode=!1,this.dimensionId=null,this.dimensionScope="";a["Matomo"].helper.lazyScrollToContent()}},computed:{addCustomDimCode:function(){return"./console customdimensions:add-custom-dimension --scope=action\n./console customdimensions:add-custom-dimension --scope=visit"},addMultipleCustomDimCode:function(){return"./console customdimensions:add-custom-dimension --scope=action --count=5"}}});Ee.render=Ve;var Ne=Ee;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=CustomDimensions.umd.min.js.map