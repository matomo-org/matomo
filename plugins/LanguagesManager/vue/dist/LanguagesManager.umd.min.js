(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue")):"function"===typeof define&&define.amd?define(["CoreHome"],t):"object"===typeof exports?exports["LanguagesManager"]=t(require("CoreHome"),require("vue")):e["LanguagesManager"]=t(e["CoreHome"],e["Vue"])})("undefined"!==typeof self?self:this,(function(e,t){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/LanguagesManager/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"TranslationSearch",(function(){return h})),n.d(t,"TranslationSearchPage",(function(){return v})),n.d(t,"LanguageSelector",(function(){return L})),n.d(t,"LanguagesDropdown",(function(){return M})),"undefined"!==typeof window){var a=window.document.currentScript,o=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var r=n("8bbf");const l=["href"],c=Object(r["createElementVNode"])("br",null,null,-1),i=Object(r["createElementVNode"])("br",null,null,-1),u={style:{"word-break":"break-all"}},s=Object(r["createElementVNode"])("th",{style:{width:"250px"}},"Key",-1),d=Object(r["createElementVNode"])("th",null,"English translation",-1),g={key:0};function m(e,t,n,a,o,m){const p=Object(r["resolveComponent"])("Field"),b=Object(r["resolveDirective"])("content-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(" This page helps you to find existing translations that you can reuse in your Plugin. If you want to know more about translations have a look at our "),Object(r["createElementVNode"])("a",{href:e.externalRawLink("https://developer.matomo.org/guides/internationalization"),rel:"noreferrer noopener",target:"_blank"},"Internationalization guide",8,l),Object(r["createTextVNode"])(". Enter a search term to find translations and their corresponding keys: ")]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(p,{uicontrol:"text",name:"alias","inline-help":"Search for English translation. Max 1000 results will be shown.",placeholder:"Search for English translation",modelValue:e.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchTerm=t)},null,8,["modelValue"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(p,{uicontrol:"select",name:"translationSearch.compareLanguage","inline-help":"Optionally select a language to compare the English language with.","model-value":e.compareLanguage,"onUpdate:modelValue":t[1]||(t[1]=t=>{e.compareLanguage=t,e.doCompareLanguage()}),options:e.languages},null,8,["model-value","options"])]),c,i,Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("table",u,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[s,d,Object(r["withDirectives"])(Object(r["createElementVNode"])("th",null,"Compare translation",512),[[r["vShow"],e.compareLanguage&&e.compareTranslations]])])]),Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filteredTranslations,t=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:t.label},[Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.label),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.value),1),e.compareLanguage&&e.compareTranslations?(Object(r["openBlock"])(),Object(r["createElementBlock"])("td",g,Object(r["toDisplayString"])(e.compareTranslations[t.label]),1)):Object(r["createCommentVNode"])("",!0)]))),128))])])),[[r["vShow"],e.searchTerm],[b]])])}var p=n("19dc");const b=Object(p["useExternalPluginComponent"])("CorePluginsAdmin","Field");var f=Object(r["defineComponent"])({components:{Field:b},directives:{ContentTable:p["ContentTable"]},data(){return{compareTranslations:null,existingTranslations:[],languages:[],compareLanguage:"",searchTerm:""}},created(){this.fetchTranslations("en"),this.fetchLanguages()},methods:{fetchTranslations(e){p["AjaxHelper"].fetch({method:"LanguagesManager.getTranslationsForLanguage",filter_limit:-1,languageCode:e}).then(t=>{t&&("en"===e?this.existingTranslations=t:(this.compareTranslations={},t.forEach(e=>{this.compareTranslations[e.label]=e.value})))})},fetchLanguages(){p["AjaxHelper"].fetch({method:"LanguagesManager.getAvailableLanguagesInfo",filter_limit:-1}).then(e=>{this.languages=[{key:"",value:"None"}],e&&e.forEach(e=>{"en"!==e.code&&this.languages.push({key:e.code,value:e.name})})})},doCompareLanguage(){this.compareLanguage&&(this.compareTranslations=null,this.fetchTranslations(this.compareLanguage))}},computed:{filteredTranslations(){let e=this.existingTranslations.filter(e=>e.label.includes(this.searchTerm)||e.value.includes(this.searchTerm));return e=e.slice(0,1e3),e}}});f.render=m;var h=f;function j(e,t,n,a,o,l){const c=Object(r["resolveComponent"])("TranslationSearch"),i=Object(r["resolveComponent"])("ContentBlock");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{"content-title":e.translate("LanguagesManager_TranslationSearch"),feature:"true"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(c)]),_:1},8,["content-title"])}var O=Object(r["defineComponent"])({components:{ContentBlock:p["ContentBlock"],TranslationSearch:h}});O.render=j;var v=O;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:k}=window;function y(e,t){const n=k(t.target).attr("value");n&&k(e).find("#language").val(n).parents("form").submit()}var L={mounted(e,t){t.value.onClick=y.bind(null,e),k(e).on("click","a[value]",t.value.onClick)},unmounted(e,t){k(e).off("click","a[value]",t.value.onClick)}};const T={class:"languageSelection"},E=["href"],C=["value","title"],N={action:"index.php?module=LanguagesManager&action=saveLanguage",method:"post",ref:"form"},V=["value"],S=["value"],x=["value"];function w(e,t,n,a,o,l){const c=Object(r["resolveComponent"])("MenuItemsDropdown");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",T,[Object(r["createVNode"])(c,{"menu-title":e.currentLanguageName,onAfterSelect:t[0]||(t[0]=t=>e.onSelect(t))},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("a",{class:"item",target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink("https://matomo.org/translations/")},Object(r["toDisplayString"])(e.translate("LanguagesManager_AboutPiwikTranslations")),9,E),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.languages,t=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:t.code,class:Object(r["normalizeClass"])("item "+(t.code===e.currentLanguageCode?"active":"")),value:t.code,title:`${t.name} (${t.english_name})`},Object(r["toDisplayString"])(t.name),11,C))),128)),Object(r["createElementVNode"])("form",N,[Object(r["createElementVNode"])("input",{type:"hidden",name:"language",id:"language",value:e.selectedLanguage},null,8,V),Object(r["createElementVNode"])("input",{type:"hidden",name:"nonce",id:"nonce",value:e.formNonce},null,8,S),e.tokenAuth?(Object(r["openBlock"])(),Object(r["createElementBlock"])("input",{key:0,type:"hidden",name:"token_auth",value:e.tokenAuth},null,8,x)):Object(r["createCommentVNode"])("",!0)],512)]),_:1},8,["menu-title"])])}var B=Object(r["defineComponent"])({props:{tokenAuth:String,formNonce:{type:String,required:!0},languages:{type:Array,required:!0},currentLanguageCode:{type:String,required:!0},currentLanguageName:{type:String,required:!0}},components:{MenuItemsDropdown:p["MenuItemsDropdown"]},data(){return{selectedLanguage:this.currentLanguageCode}},methods:{onSelect(e){this.selectedLanguage=e.getAttribute("value"),Object(r["nextTick"])().then(()=>{this.$refs.form.submit()})}}});B.render=w;var M=B;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=LanguagesManager.umd.min.js.map