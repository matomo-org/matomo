(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["Marketplace"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["Marketplace"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(l){if(t[l])return t[l].exports;var a=t[l]={i:l,l:!1,exports:{}};return e[l].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(l,a,function(t){return e[t]}.bind(null,a));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/Marketplace/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"Marketplace",(function(){return mn})),n.d(t,"InstallAllPaidPluginsButton",(function(){return vn})),n.d(t,"ManageLicenseKey",(function(){return wn})),n.d(t,"GetNewPlugins",(function(){return Hn})),n.d(t,"GetNewPluginsAdmin",(function(){return nl})),n.d(t,"GetPremiumFeatures",(function(){return jl})),n.d(t,"MissingReqsNotice",(function(){return en})),n.d(t,"OverviewIntro",(function(){return El})),n.d(t,"SubscriptionOverview",(function(){return Yl})),n.d(t,"RichMenuButton",(function(){return ra})),n.d(t,"PluginList",(function(){return sn})),"undefined"!==typeof window){var l=window.document.currentScript,a=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(n.p=a[1])}var r=n("8bbf");const i={class:"row marketplaceActions",ref:"root"},o={class:"col s12 m6 l4"},c={class:"col s12 m6 l4"},s={key:0,class:"col s12 m12 l4"},u={class:"plugin-search"},d=Object(r["createElementVNode"])("span",{class:"icon-search"},null,-1),p=["alt"];function m(e,t,n,l,a,m){var b;const g=Object(r["resolveComponent"])("Field"),O=Object(r["resolveComponent"])("PluginList"),j=Object(r["resolveComponent"])("ContentBlock");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",i,[Object(r["createElementVNode"])("div",o,[Object(r["createVNode"])(g,{uicontrol:"select",name:"plugin_type","model-value":e.pluginTypeFilter,"onUpdate:modelValue":e.updateType,title:e.translate("Marketplace_Show"),"full-width":!0,options:e.pluginTypeOptions},null,8,["model-value","onUpdate:modelValue","title","options"])]),Object(r["createElementVNode"])("div",c,[Object(r["createVNode"])(g,{uicontrol:"select",name:"plugin_sort","model-value":e.pluginSort,"onUpdate:modelValue":e.updateSort,title:e.translate("Marketplace_Sort"),"full-width":!0,options:e.pluginSortOptions},null,8,["model-value","onUpdate:modelValue","title","options"])]),(null===(b=e.pluginsToShow)||void 0===b?void 0:b.length)>20||e.searchQuery?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",s,[Object(r["createElementVNode"])("div",u,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(g,{uicontrol:"text",name:"query",title:e.queryInputTitle,"full-width":!0,"model-value":e.searchQuery,"onUpdate:modelValue":e.updateQuery},null,8,["title","model-value","onUpdate:modelValue"])]),d])])):Object(r["createCommentVNode"])("",!0)],512),!e.loading&&e.pluginsToShow.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:0,"plugins-to-show":e.pluginsToShow,"current-user-email":e.currentUserEmail,"is-auto-update-possible":e.isAutoUpdatePossible,"is-super-user":e.isSuperUser,"is-multi-server-environment":e.isMultiServerEnvironment,"has-some-admin-access":e.hasSomeAdminAccess,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-valid-consumer":e.isValidConsumer,"deactivate-nonce":e.deactivateNonce,"activate-nonce":e.activateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,"num-users":e.numUsers,onTriggerUpdate:t[0]||(t[0]=e=>this.updateMarketplace()),onStartTrialStart:t[1]||(t[1]=e=>this.$emit("startTrialStart")),onStartTrialStop:t[2]||(t[2]=e=>this.$emit("startTrialStop"))},null,8,["plugins-to-show","current-user-email","is-auto-update-possible","is-super-user","is-multi-server-environment","has-some-admin-access","is-plugins-admin-enabled","is-valid-consumer","deactivate-nonce","activate-nonce","install-nonce","update-nonce","num-users"])):Object(r["createCommentVNode"])("",!0),e.loading||0!=e.pluginsToShow.length?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(j,{key:1},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate(e.showThemes?"Marketplace_NoThemesFound":"Marketplace_NoPluginsFound")),1)]),_:1})),e.loading?(Object(r["openBlock"])(),Object(r["createBlock"])(j,{key:2},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",alt:e.translate("General_LoadingData")},null,8,p),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.loadingMessage),1)]),_:1})):Object(r["createCommentVNode"])("",!0)],64)}var b=n("19dc"),g=n("a5a2");const O={key:0,class:"pluginListContainer row"},j=["onClick"],h={class:"card"},k={class:"card-content"},y=["src"],v={class:"content-container"},N={class:"card-content-top"},V={key:0,class:"matomo-badge matomo-badge-top",src:"plugins/Marketplace/images/matomo-badge.png","aria-label":"Matomo plugin",alt:""},E={class:"price"},S=["onClick"],B=Object(r["createElementVNode"])("div",{class:"card-focus"},null,-1),f={class:"card-title"},M=Object(r["createElementVNode"])("span",{class:"card-title-chevron"}," ›",-1),T={class:"card-description"},w={class:"card-content-bottom"},P={key:0,class:"downloads"},C={class:"owner"},D={key:0},A={key:1},_={class:"cta-container"},L={key:1,class:"matomo-badge matomo-badge-bottom",src:"plugins/Marketplace/images/matomo-badge.png","aria-label":"Matomo plugin",alt:""};function U(e,t,n,l,a,i){const o=Object(r["resolveComponent"])("RequestTrial"),c=Object(r["resolveComponent"])("StartFreeTrial"),s=Object(r["resolveComponent"])("PluginDetailsModal"),u=Object(r["resolveComponent"])("CTAContainer");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(o,{modelValue:e.showRequestTrialForPlugin,"onUpdate:modelValue":t[0]||(t[0]=t=>e.showRequestTrialForPlugin=t),onTrialRequested:t[1]||(t[1]=e=>this.$emit("triggerUpdate"))},null,8,["modelValue"]),Object(r["createVNode"])(c,{"current-user-email":e.currentUserEmail,"is-valid-consumer":e.isValidConsumer,modelValue:e.showStartFreeTrialForPlugin,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showStartFreeTrialForPlugin=t),onTrialStarted:t[3]||(t[3]=e=>{this.$emit("triggerUpdate")}),onStartTrialStart:t[4]||(t[4]=e=>{this.$emit("startTrialStart")}),onStartTrialStop:t[5]||(t[5]=e=>{this.$emit("startTrialStop")})},null,8,["current-user-email","is-valid-consumer","modelValue"]),Object(r["createVNode"])(s,{modelValue:e.showPluginDetailsForPlugin,"onUpdate:modelValue":t[6]||(t[6]=t=>e.showPluginDetailsForPlugin=t),"is-super-user":e.isSuperUser,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-multi-server-environment":e.isMultiServerEnvironment,"is-valid-consumer":e.isValidConsumer,"is-auto-update-possible":e.isAutoUpdatePossible,"has-some-admin-access":e.hasSomeAdminAccess,"deactivate-nonce":e.deactivateNonce,"activate-nonce":e.activateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,"num-users":e.numUsers,onRequestTrial:t[7]||(t[7]=e=>this.requestTrial(e)),onStartFreeTrial:t[8]||(t[8]=e=>this.startFreeTrial(e))},null,8,["modelValue","is-super-user","is-plugins-admin-enabled","is-multi-server-environment","is-valid-consumer","is-auto-update-possible","has-some-admin-access","deactivate-nonce","activate-nonce","install-nonce","update-nonce","num-users"]),e.pluginsToShow.length>0?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",O,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.pluginsToShow,t=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"col s12 m6 l4",key:t.name},[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])("card-holder "+(t.numDownloads>0?"card-with-downloads":"")),onClick:n=>e.clickCard(n,t)},[Object(r["createElementVNode"])("div",h,[Object(r["createElementVNode"])("div",k,[Object(r["createElementVNode"])("img",{src:t.coverImage+"?w=880&h=480",alt:"",class:"cover-image"},null,8,y),Object(r["createElementVNode"])("div",v,[Object(r["createElementVNode"])("div",N,["piwik"==t.owner||"matomo-org"==t.owner?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",V)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",E,[t.priceFrom?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_PriceFromPerPeriod",t.priceFrom.prettyPrice,t.priceFrom.period)),1)],64)):t.isFree?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_Free")),1)],64)):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("a",{onClick:Object(r["withModifiers"])(n=>e.clickCard(n,t),["prevent"]),class:"card-title-link",href:"#",tabindex:"7"},[B,Object(r["createElementVNode"])("h2",f,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.displayName),1),M])],8,S),Object(r["createElementVNode"])("div",T,Object(r["toDisplayString"])(t.description),1)]),Object(r["createElementVNode"])("div",w,[t.numDownloads>0?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",P,Object(r["toDisplayString"])(t.numDownloadsPretty)+" "+Object(r["toDisplayString"])(e.translate("General_Downloads").toLowerCase()),1)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",C,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_CreatedBy"))+" ",1),"piwik"===t.owner||"matomo-org"===t.owner?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",D," Matomo")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",A,Object(r["toDisplayString"])(t.owner),1))]),Object(r["createElementVNode"])("div",_,[Object(r["createVNode"])(u,{"is-super-user":e.isSuperUser,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-multi-server-environment":e.isMultiServerEnvironment,"is-valid-consumer":e.isValidConsumer,"is-auto-update-possible":e.isAutoUpdatePossible,"activate-nonce":e.activateNonce,"deactivate-nonce":e.deactivateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,plugin:t,"in-modal":!1,onOpenDetailsModal:e=>this.openDetailsModal(t),onRequestTrial:e=>this.requestTrial(t),onStartFreeTrial:e=>this.startFreeTrial(t)},null,8,["is-super-user","is-plugins-admin-enabled","is-multi-server-environment","is-valid-consumer","is-auto-update-possible","activate-nonce","deactivate-nonce","install-nonce","update-nonce","plugin","onOpenDetailsModal","onRequestTrial","onStartFreeTrial"])]),"piwik"==t.owner||"matomo-org"==t.owner?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",L)):Object(r["createCommentVNode"])("",!0)])])])])],10,j)]))),128))])):Object(r["createCommentVNode"])("",!0)],64)}const q={key:0,class:"alert alert-danger alert-no-background"},x={key:0,style:{"white-space":"nowrap"}},F=["href"],R={key:2,class:"alert alert-danger alert-no-background"},I={key:0,style:{"white-space":"nowrap"}},$=["href"],H={key:1,class:"alert alert-warning alert-no-background"},K={key:0,style:{"white-space":"nowrap"}},z={key:4,class:"alert alert-success alert-no-background"},G=["href"],Q=["href"],W=["title"],J=["title","href"],Y={key:8,class:"alert alert-warning alert-no-background"},Z={key:0,style:{"white-space":"nowrap"}},X=["href"],ee=["title"],te=["title"];function ne(e,t,n,l,a,i){const o=Object(r["resolveComponent"])("MoreDetailsAction"),c=Object(r["resolveComponent"])("DownloadButton");return e.isSuperUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[e.plugin.isMissingLicense?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",q,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_LicenseMissing"))+" ",1),e.inModal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",x,[Object(r["createTextVNode"])("("),Object(r["createVNode"])(o,{onAction:t[0]||(t[0]=t=>e.$emit("openDetailsModal"))}),Object(r["createTextVNode"])(")")]))])):e.inModal&&e.plugin.hasExceededLicense&&e.plugin.consumer.loginUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:1,class:"btn btn-block",tabindex:"7",target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.plugin.consumer.loginUrl)},Object(r["toDisplayString"])(e.translate("Marketplace_UpgradeSubscription")),9,F)):e.plugin.hasExceededLicense?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",R,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_LicenseExceeded"))+" ",1),e.inModal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",I,[Object(r["createTextVNode"])("("),Object(r["createVNode"])(o,{onAction:t[1]||(t[1]=t=>e.$emit("openDetailsModal"))}),Object(r["createTextVNode"])(")")]))])):e.plugin.canBeUpdated&&0==e.plugin.missingRequirements.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:3},[e.isAutoUpdatePossible&&e.isPluginsAdminEnabled?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,tabindex:"7",class:"btn btn-block",href:e.linkToUpdate(e.plugin.name)},Object(r["toDisplayString"])(e.translate("CoreUpdater_UpdateTitle")),9,$)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",H,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_CannotUpdate"))+" ",1),!e.inModal||0===e.plugin.missingRequirements.length&&e.plugin.isDownloadable&&!e.isAutoUpdatePossible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",K,[Object(r["createTextVNode"])("("),e.inModal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:0,onAction:t[2]||(t[2]=t=>e.$emit("openDetailsModal"))})),Object(r["createVNode"])(c,{plugin:e.plugin,"show-or":!e.inModal,"is-auto-update-possible":e.isAutoUpdatePossible},null,8,["plugin","show-or","is-auto-update-possible"]),Object(r["createTextVNode"])(")")])):Object(r["createCommentVNode"])("",!0)]))],64)):e.plugin.isInstalled?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",z,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("General_Installed"))+" ",1),e.plugin.missingRequirements.length>0||!e.isAutoUpdatePossible?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])(" ("),Object(r["createVNode"])(c,{plugin:e.plugin,"show-or":!1,"is-auto-update-possible":e.isAutoUpdatePossible},null,8,["plugin","is-auto-update-possible"]),Object(r["createTextVNode"])(") ")],64)):e.plugin.isInvalid||e.isMultiServerEnvironment||!e.isPluginsAdminEnabled?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createTextVNode"])(" ("),e.plugin.isActivated?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,tabindex:"7",href:e.linkToDeactivate(e.plugin.name)},Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Deactivate")),9,G)):e.plugin.missingRequirements.length>0?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createTextVNode"])(" - ")],64)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:2,tabindex:"7",href:e.linkToActivate(e.plugin.name)},Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Activate")),9,Q)),Object(r["createTextVNode"])(") ")],64))])):e.plugin.isEligibleForFreeTrial&&!e.inModal&&e.isPluginsAdminEnabled?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:5,class:"btn btn-block purchaseable",title:e.translate("Marketplace_StartFreeTrial")},Object(r["toDisplayString"])(e.translate("Marketplace_StartFreeTrial")),9,W)):e.plugin.isEligibleForFreeTrial&&e.inModal?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:6,class:"btn btn-block addToCartLink",target:"_blank",title:e.translate("Marketplace_ClickToCompletePurchase"),rel:"noreferrer noopener",href:e.shopVariationUrl},Object(r["toDisplayString"])(e.translate("Marketplace_AddToCart")),9,J)):e.inModal||e.plugin.isDownloadable||!(e.plugin.isPaid||e.plugin.missingRequirements.length>0)&&e.isAutoUpdatePossible?e.plugin.missingRequirements.length>0||!e.isAutoUpdatePossible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Y,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_CannotInstall"))+" ",1),!e.inModal||0===e.plugin.missingRequirements.length&&e.plugin.isDownloadable&&!e.isAutoUpdatePossible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Z,[Object(r["createTextVNode"])("("),e.inModal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:0,onAction:t[4]||(t[4]=t=>e.$emit("openDetailsModal"))})),Object(r["createVNode"])(c,{plugin:e.plugin,"show-or":!e.inModal,"is-auto-update-possible":e.isAutoUpdatePossible},null,8,["plugin","show-or","is-auto-update-possible"]),Object(r["createTextVNode"])(")")])):Object(r["createCommentVNode"])("",!0)])):e.isPluginsAdminEnabled&&e.plugin.hasDownloadLink?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:9,tabindex:"7",href:e.linkToInstall(e.plugin.name),class:"btn btn-block"},Object(r["toDisplayString"])(e.translate("Marketplace_ActionInstall")),9,X)):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:10},[e.inModal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:0,"show-as-button":!0,label:e.translate("General_MoreDetails"),onAction:t[5]||(t[5]=t=>e.$emit("openDetailsModal"))},null,8,["label"]))],64)):(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:7,"show-as-button":!0,label:e.translate("General_MoreDetails"),onAction:t[3]||(t[3]=t=>e.$emit("openDetailsModal"))},null,8,["label"]))],64)):e.plugin.isTrialRequested?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:1,tabindex:"7",class:"btn btn-block purchaseable disabled",href:"",title:e.translate("Marketplace_TrialRequested")},Object(r["toDisplayString"])(e.translate("Marketplace_TrialRequested")),9,ee)):e.plugin.canTrialBeRequested&&!e.plugin.isMissingLicense?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:2,tabindex:"7",class:"btn btn-block purchaseable",href:"",onClick:t[6]||(t[6]=Object(r["withModifiers"])(e=>{this.$emit("requestTrial")},["prevent"])),title:e.translate("Marketplace_RequestTrial")},Object(r["toDisplayString"])(e.translate("Marketplace_RequestTrial")),9,te)):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:3},[e.inModal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:0,"show-as-button":!0,label:e.translate("General_MoreDetails"),onAction:t[7]||(t[7]=t=>e.$emit("openDetailsModal"))},null,8,["label"]))],64))}const le={key:0,onclick:"$(this).css('display', 'none')"},ae=["href"];function re(e,t,n,l,a,i){return 0===e.plugin.missingRequirements.length&&e.plugin.isDownloadable&&!e.isAutoUpdatePossible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",le,[e.showOr?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("General_Or"))+" ",1)],64)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("a",{tabindex:"7",class:"plugin-details download",href:e.linkTo({module:"Marketplace",action:"download",pluginName:e.plugin.name,nonce:e.plugin.downloadNonce})},Object(r["toDisplayString"])(e.translate("General_Download")),9,ae)])):Object(r["createCommentVNode"])("",!0)}function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},ie.apply(this,arguments)}var oe=Object(r["defineComponent"])({props:{plugin:{type:Object,required:!0},showOr:{type:Boolean,default:!1},isAutoUpdatePossible:{type:Boolean,required:!0}},methods:{linkTo(e){return"?"+b["MatomoUrl"].stringify(ie(ie({},b["MatomoUrl"].urlParsed.value),e))}}});oe.render=re;var ce=oe;const se=["title"];function ue(e,t,n,l,a,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{tabindex:"7",class:Object(r["normalizeClass"])({"btn btn-block":e.showAsButton}),href:"",title:e.translate("General_MoreDetails"),onClick:t[0]||(t[0]=Object(r["withModifiers"])(t=>e.$emit("action"),["prevent"])),onKeyup:t[1]||(t[1]=Object(r["withKeys"])(t=>e.$emit("action"),["enter"]))},Object(r["toDisplayString"])(e.label?e.label:e.translate("General_Help")),43,se)}var de=Object(r["defineComponent"])({props:{showAsButton:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1}},emits:["action"]});de.render=ue;var pe=de;function me(){return me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},me.apply(this,arguments)}var be=Object(r["defineComponent"])({props:{plugin:{type:Object,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},installNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},isAutoUpdatePossible:{type:Boolean,required:!0},isValidConsumer:{type:Boolean,required:!0},isMultiServerEnvironment:{type:Boolean,required:!0},isPluginsAdminEnabled:{type:Boolean,required:!0},isSuperUser:{type:Boolean,required:!0},inModal:{type:Boolean,required:!0},shopVariationUrl:{type:String,required:!1,default:""}},emits:["openDetailsModal","requestTrial","startFreeTrial"],components:{MoreDetailsAction:pe,DownloadButton:ce},methods:{linkToActivate(e){return this.linkTo({module:"CorePluginsAdmin",action:"activate",redirectTo:"referrer",nonce:this.activateNonce,pluginName:e})},linkToDeactivate(e){return this.linkTo({module:"CorePluginsAdmin",action:"deactivate",redirectTo:"referrer",nonce:this.deactivateNonce,pluginName:e})},linkToInstall(e){return this.linkTo({module:"Marketplace",action:"installPlugin",nonce:this.installNonce,pluginName:e})},linkToUpdate(e){return this.linkTo({module:"Marketplace",action:"updatePlugin",nonce:this.updateNonce,pluginName:e})},linkTo(e){return"?"+b["MatomoUrl"].stringify(me(me({},b["MatomoUrl"].urlParsed.value),e))}}});be.render=ne;var ge=be;const Oe={class:"ui-confirm",ref:"confirm"},je=["value"],he=["value"];function ke(e,t,n,l,a,i){var o;return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Oe,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("Marketplace_RequestTrialConfirmTitle",null===(o=e.plugin)||void 0===o?void 0:o.displayName)),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("Marketplace_RequestTrialConfirmEmailWarning")),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,je),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,he)],512)}var ye=Object(r["defineComponent"])({props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","trialRequested"],watch:{modelValue(e){e&&b["Matomo"].helper.modalConfirm(this.$refs.confirm,{yes:()=>{this.requestTrial(e)}},{onCloseEnd:()=>{this.$emit("update:modelValue",null)}})}},computed:{plugin(){return this.modelValue}},methods:{requestTrial(e){b["AjaxHelper"].post({module:"API",method:"Marketplace.requestTrial"},{pluginName:e.name}).then(()=>{const t=b["NotificationsStore"].show({message:Object(b["translate"])("Marketplace_RequestTrialSubmitted",e.displayName),context:"success",id:"requestTrialSuccess",placeat:"#notificationContainer",type:"transient"});b["NotificationsStore"].scrollToNotification(t),this.$emit("trialRequested")})}}});ye.render=ke;var ve=ye;const Ne={class:"modal",id:"startFreeTrial"},Ve={key:0,class:"btn-close modal-close"},Ee=Object(r["createElementVNode"])("i",{class:"icon-close"},null,-1),Se=[Ee],Be={key:1,class:"modal-content trial-start-in-progress"},fe={class:"Piwik_Popover_Loading"},Me={class:"Piwik_Popover_Loading_Name"},Te={key:2,class:"modal-content trial-start-error"},we={class:"modal-text"},Pe={key:3,class:"modal-content trial-start-no-license"},Ce={class:"modal-text"},De=["innerHTML"],Ae=["innerHTML"],_e=["disabled"],Le=["innerHTML"];function Ue(e,t,n,l,a,i){const o=Object(r["resolveComponent"])("Field");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ne,[e.trialStartInProgress?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Ve,Se)),e.trialStartInProgress?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Be,[Object(r["createElementVNode"])("div",fe,[Object(r["createElementVNode"])("div",Me,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("Marketplace_TrialStartInProgressTitle")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("Marketplace_TrialStartInProgressText")),1)])])])):e.trialStartError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Te,[Object(r["createElementVNode"])("div",we,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("Marketplace_TrialStartErrorTitle")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.trialStartError),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("Marketplace_TrialStartErrorSupport")),1)])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Pe,[Object(r["createElementVNode"])("div",Ce,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("Marketplace_TrialStartNoLicenseTitle")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("Marketplace_TrialStartNoLicenseText")),1),Object(r["createVNode"])(o,{uicontrol:"text",name:"email",modelValue:e.createAccountEmail,"onUpdate:modelValue":t[0]||(t[0]=t=>e.createAccountEmail=t),"full-width":!0,title:e.translate("UsersManager_Email")},null,8,["modelValue","title"]),e.createAccountError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:"alert alert-danger",innerHTML:e.$sanitize(e.createAccountError)},null,8,De)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("p",{class:"trial-start-legal-hint",innerHTML:e.$sanitize(e.trialStartNoLicenseLegalHintText)},null,8,Ae),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("button",{class:"btn",disabled:!e.createAccountEmail,onClick:t[1]||(t[1]=t=>e.createAccountAndStartFreeTrial())},Object(r["toDisplayString"])(e.translate("Marketplace_TrialStartNoLicenseCreateAccount")),9,_e)]),Object(r["createElementVNode"])("p",{class:"add-existing-license",innerHTML:e.$sanitize(e.trialStartNoLicenseAddHereText)},null,8,Le)])]))])}const{$:qe}=window;var xe=Object(r["defineComponent"])({components:{Field:g["Field"]},props:{modelValue:{type:Object,default:()=>({})},currentUserEmail:String,isValidConsumer:Boolean},data(){return{createAccountEmail:this.currentUserEmail||"",createAccountError:null,trialStartError:null,loadingModalCloseCallback:void 0,trialStartInProgress:!1,trialStartSuccessNotificationMessage:"",trialStartSuccessNotificationTitle:""}},emits:["update:modelValue","trialStarted","startTrialStart","startTrialStop"],watch:{modelValue(e){e&&(this.isValidConsumer?(this.trialStartSuccessNotificationMessage=Object(b["translate"])("CorePluginsAdmin_PluginFreeTrialStarted","<strong>","</strong>",this.plugin.displayName),this.startFreeTrial()):(this.trialStartSuccessNotificationTitle=Object(b["translate"])("CorePluginsAdmin_PluginFreeTrialStartedAccountCreatedTitle"),this.trialStartSuccessNotificationMessage=Object(b["translate"])("CorePluginsAdmin_PluginFreeTrialStartedAccountCreatedMessage",this.plugin.displayName),this.showLicenseDialog(!1)))}},computed:{plugin(){return this.modelValue},trialStartNoLicenseAddHereText(){const e="?"+b["MatomoUrl"].stringify({module:"Marketplace",action:"manageLicenseKey"});return Object(b["translate"])("Marketplace_TrialStartNoLicenseAddHere",`<a href="${e}">`,"</a>")},trialStartNoLicenseLegalHintText(){return Object(b["translate"])("Marketplace_TrialStartNoLicenseLegalHint",Object(b["externalLink"])("https://shop.matomo.org/terms-conditions/"),"</a>",Object(b["externalLink"])("https://matomo.org/privacy-policy/"),"</a>")}},methods:{closeModal(){qe("#startFreeTrial").modal("close")},createAccountAndStartFreeTrial(){this.createAccountEmail&&(this.showLoadingModal(!0),b["AjaxHelper"].post({module:"API",method:"Marketplace.createAccount"},{email:this.createAccountEmail},{createErrorNotification:!1}).then(()=>{this.startFreeTrial()}).catch(e=>{e.message.startsWith("Marketplace_CreateAccountError")?(this.showErrorModal(Object(b["translate"])(e.message)),this.trialStartInProgress=!1,this.$emit("update:modelValue",null)):(this.createAccountError=e.message,this.trialStartInProgress=!1,this.showLicenseDialog(!0))}))},showLicenseDialog(e){const t=e=>{const t=e.keyCode?e.keyCode:e.which;13===t&&(this.closeModal(),this.createAccountAndStartFreeTrial())},n={dismissible:!0,onOpenEnd:()=>{const e=".modal.open #email";qe(e).focus(),qe(e).off("keypress").keypress(t)},onCloseEnd:()=>{this.createAccountError=null,this.trialStartInProgress||this.$emit("update:modelValue",null)}};e&&(n.inDuration=0),qe("#startFreeTrial").modal(n).modal("open")},showErrorModal(e){this.trialStartError||(this.trialStartError=e,qe("#startFreeTrial").modal({dismissible:!0,inDuration:0,onCloseEnd:()=>{this.trialStartError=null}}).modal("open"))},showLoadingModal(e){this.trialStartInProgress||(this.trialStartInProgress=!0,this.loadingModalCloseCallback=void 0,qe("#startFreeTrial").modal({dismissible:!1,inDuration:e?0:void 0,onCloseEnd:()=>{this.loadingModalCloseCallback&&(this.loadingModalCloseCallback(),this.loadingModalCloseCallback=void 0)}}).modal("open"))},startFreeTrial(){this.showLoadingModal(!1),this.$emit("startTrialStart"),b["AjaxHelper"].post({module:"API",method:"Marketplace.startFreeTrial"},{pluginName:this.plugin.name},{createErrorNotification:!1}).then(()=>{this.loadingModalCloseCallback=this.startFreeTrialSuccess,this.closeModal()}).catch(e=>{this.showErrorModal(b["Matomo"].helper.htmlDecode(e.message)),this.trialStartInProgress=!1,this.$emit("startTrialStop")}).finally(()=>{this.$emit("update:modelValue",null)})},startFreeTrialSuccess(){const e=b["NotificationsStore"].show({message:this.trialStartSuccessNotificationMessage,title:this.trialStartSuccessNotificationTitle,context:"success",id:"startTrialSuccess",placeat:"#notificationContainer",type:"transient"});b["NotificationsStore"].scrollToNotification(e),this.trialStartInProgress=!1,this.$emit("trialStarted")}}});xe.render=Ue;var Fe=xe;const Re={ref:"root",class:"modal",id:"pluginDetailsModal"},Ie={class:"modal-content__header"},$e=Object(r["createElementVNode"])("span",{class:"btn-close modal-close"},[Object(r["createElementVNode"])("i",{class:"icon-close"})],-1),He={key:0,class:"plugin-metadata-part1"},Ke=Object(r["createElementVNode"])("h3",{class:"sr-only"},"Plugin details — part 1",-1),ze={key:0,class:"pair"},Ge=Object(r["createElementVNode"])("img",{class:"star-icon reviews-icon",src:"plugins/Marketplace/images/star.svg",alt:""},null,-1),Qe={key:1,class:"pair"},We={key:2,class:"pair"},Je={key:3,class:"pair"},Ye={key:4,class:"pair"},Ze={class:"plugin-description"},Xe={key:1,class:"alert alert-warning"},et={key:2,class:"alert alert-warning"},tt={key:3,class:"alert alert-danger"},nt={key:4,class:"alert alert-warning"},lt=["innerHTML"],at=["innerHTML"],rt=["innerHTML"],it=["innerHTML"],ot={class:"plugin-metadata-part2"},ct=Object(r["createElementVNode"])("hr",null,null,-1),st=Object(r["createElementVNode"])("h3",{class:"sr-only"},"Plugin details — part 2",-1),ut={key:0,class:"pair"},dt={key:1,class:"pair"},pt={class:"pair"},mt=["href"],bt=["href"],gt={key:2},Ot={key:3},jt={class:"pair"},ht=["href"],kt=["href"],yt=["href"],vt={key:0,class:"pair"},Nt={key:1,class:"pair"},Vt=["href"],Et={key:1},St=["innerHTML"],Bt={key:0},ft=["href"],Mt={key:1},Tt=["href"],wt=["innerHTML"],Pt={key:0,class:"plugin-screenshots"},Ct=Object(r["createElementVNode"])("hr",null,null,-1),Dt={class:"thumbnails"},At=["src"],_t={key:1,class:"plugin-documentation"},Lt=Object(r["createElementVNode"])("hr",null,null,-1),Ut=["innerHTML"],qt={key:2,class:"plugin-faq"},xt=Object(r["createElementVNode"])("hr",null,null,-1),Ft=["innerHTML"],Rt={key:3,class:"plugin-reviews",id:"reviews"},It=Object(r["createElementVNode"])("hr",null,null,-1),$t=["id","src"],Ht={key:0,class:"matomo-badge matomo-badge-modal",src:"plugins/Marketplace/images/matomo-badge.png","aria-label":"Matomo plugin",alt:""},Kt={class:"cta-container cta-container-modal"},zt={key:0,class:"free-trial"},Gt={class:"free-trial-lead-in"},Qt=["title"],Wt=["value","title"],Jt={key:1,class:"matomo-badge matomo-badge-modal",src:"plugins/Marketplace/images/matomo-badge.png","aria-label":"Matomo plugin",alt:""};function Yt(e,t,n,l,a,i){var o,c,s,u,d,p;const m=Object(r["resolveComponent"])("MissingReqsNotice"),b=Object(r["resolveComponent"])("CTAContainer");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Re,[e.isLoading?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:Object(r["normalizeClass"])(["modal-content",{"modal-content--simple-header":!e.hasHeaderMetadata}])},[Object(r["createElementVNode"])("div",Ie,[$e,Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.plugin&&e.plugin.displayName?e.plugin.displayName:"Plugin details"),1),e.hasHeaderMetadata?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",He,[Ke,Object(r["createElementVNode"])("dl",null,[e.showReviews?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ze,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("Marketplace_Reviews")),1),Object(r["createElementVNode"])("dd",null,[Ge,Object(r["createElementVNode"])("a",{onClick:t[0]||(t[0]=t=>e.scrollElementIntoView("#reviews"))},Object(r["toDisplayString"])(e.pluginReviews.averageRating),1)])])):Object(r["createCommentVNode"])("",!0),e.plugin.isBundle?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Qe,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Version")),1),Object(r["createElementVNode"])("dd",null,Object(r["toDisplayString"])(e.plugin.latestVersion),1)])),e.plugin.numDownloads>0?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",We,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("General_Downloads")),1),Object(r["createElementVNode"])("dd",null,Object(r["toDisplayString"])(e.plugin.numDownloadsPretty),1)])):Object(r["createCommentVNode"])("",!0),e.plugin.lastUpdated&&!e.plugin.isBundle?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Je,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("Marketplace_LastUpdated")),1),Object(r["createElementVNode"])("dd",null,Object(r["toDisplayString"])(e.plugin.lastUpdated),1)])):Object(r["createCommentVNode"])("",!0),e.plugin.isBundle?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ye,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("Marketplace_Developer")),1),Object(r["createElementVNode"])("dd",null,Object(r["toDisplayString"])(e.pluginOwner),1)]))])])):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["modal-content__main",{"modal-content__main--with-free-trial":e.showFreeTrialDropdown}])},[Object(r["createElementVNode"])("div",Ze,[e.showMissingRequirementsNoticeIfApplicable?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,plugin:e.plugin},null,8,["plugin"])):Object(r["createCommentVNode"])("",!0),e.isMultiServerEnvironment?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Xe,Object(r["toDisplayString"])(e.translate("Marketplace_MultiServerEnvironmentWarning")),1)):e.isAutoUpdatePossible?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",et,Object(r["toDisplayString"])(e.translate("Marketplace_AutoUpdateDisabledWarning","'[General]enable_auto_update=1'","'config/config.ini.php'")),1)),e.showMissingLicenseDescription?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",tt,Object(r["toDisplayString"])(e.translate("Marketplace_PluginLicenseMissingDescription")),1)):e.showExceededLicenseDescription?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",nt,Object(r["toDisplayString"])(e.translate("Marketplace_PluginLicenseExceededDescription")),1)):"Pending"!==e.plugin.licenseStatus||e.isMultiServerEnvironment?"Cancelled"!==e.plugin.licenseStatus||e.isMultiServerEnvironment?e.plugin.hasDownloadLink||e.isMultiServerEnvironment||!e.plugin.licenseStatus&&e.plugin.isPaid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:7,class:"alert alert-warning",innerHTML:e.$sanitize(e.getDownloadLinkMissingHelpText(e.plugin.displayName))},null,8,rt)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:6,class:"alert alert-warning",innerHTML:e.$sanitize(e.getCancelledLicenseHelpText(e.plugin.displayName))},null,8,at)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:5,class:"alert alert-warning",innerHTML:e.$sanitize(e.getPendingLicenseHelpText(e.plugin.displayName))},null,8,lt)),Object(r["createElementVNode"])("div",{innerHTML:e.$sanitize(e.pluginDescription)},null,8,it)]),Object(r["createElementVNode"])("div",ot,[ct,st,Object(r["createElementVNode"])("dl",null,[e.plugin.isBundle?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ut,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Version")),1),Object(r["createElementVNode"])("dd",null,Object(r["toDisplayString"])(e.plugin.latestVersion),1)])),e.pluginKeywords?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",dt,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("Marketplace_PluginKeywords")),1),Object(r["createElementVNode"])("dd",null,Object(r["toDisplayString"])(e.pluginKeywords.join(", ")),1)])):Object(r["createCommentVNode"])("",!0),e.plugin.isBundle?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:2},[Object(r["createElementVNode"])("div",pt,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("Marketplace_Authors")),1),Object(r["createElementVNode"])("dd",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.pluginAuthors,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:"author-"+n},[t.homepage?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,target:"_blank",rel:"noreferrer noopener",href:t.homepage},Object(r["toDisplayString"])(t.name),9,mt)):t.email&&e.isValidEmail(t.email)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:1,href:"mailto:"+encodeURIComponent(t.email)},Object(r["toDisplayString"])(t.name),9,bt)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",gt,Object(r["toDisplayString"])(t.name),1)),n<e.pluginAuthors.length-1?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Ot,", ")):Object(r["createCommentVNode"])("",!0)],64))),128))])]),Object(r["createElementVNode"])("div",jt,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Websites")),1),Object(r["createElementVNode"])("dd",null,[e.plugin.homepage?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,target:"_blank",rel:"noreferrer noopener",href:e.plugin.homepage},Object(r["toDisplayString"])(e.translate("Marketplace_PluginWebsite")),9,ht)):Object(r["createCommentVNode"])("",!0),e.pluginChangelogUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[e.plugin.homepage?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])(", ")],64)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.pluginChangelogUrl)},Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Changelog")),9,kt)],64)):Object(r["createCommentVNode"])("",!0),e.plugin.repositoryUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:2},[e.plugin.homepage||e.pluginChangelogUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])(", ")],64)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.plugin.repositoryUrl)},"GitHub",8,yt)],64)):Object(r["createCommentVNode"])("",!0)])]),e.pluginActivity&&e.pluginActivity.numCommits?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",vt,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Activity")),1),Object(r["createElementVNode"])("dd",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.plugin.activity.numCommits)+" commits ",1),(null===(o=e.pluginActivity)||void 0===o?void 0:o.numContributors)>1?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(" "+e.translate("Marketplace_ByXDevelopers",e.pluginActivity.numContributors)),1)],64)):Object(r["createCommentVNode"])("",!0),null!==(c=e.pluginActivity)&&void 0!==c&&c.lastCommitDate?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(" "+e.translate("Marketplace_LastCommitTime",e.pluginActivity.lastCommitDate)),1)],64)):Object(r["createCommentVNode"])("",!0)])])):Object(r["createCommentVNode"])("",!0),e.showLicenseName?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Nt,[Object(r["createElementVNode"])("dt",null,Object(r["toDisplayString"])(e.translate("Marketplace_License")),1),Object(r["createElementVNode"])("dd",null,[null!==(s=e.pluginLatestVersion.license)&&void 0!==s&&s.url?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,rel:"noreferrer noopener",href:null===(u=e.pluginLatestVersion.license)||void 0===u?void 0:u.url,target:"_blank"},Object(r["toDisplayString"])(null===(d=e.pluginLatestVersion.license)||void 0===d?void 0:d.name),9,Vt)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Et,Object(r["toDisplayString"])(null===(p=e.pluginLatestVersion.license)||void 0===p?void 0:p.name),1))])])):Object(r["createCommentVNode"])("",!0),e.pluginSupport.length?(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],{key:2},Object(r["renderList"])(e.pluginSupport,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"pair",key:"support-"+n},[t.name&&t.value?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createElementVNode"])("dt",{innerHTML:e.$sanitize(t.name)},null,8,St),this.isValidHttpUrl(t.value)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("dd",Bt,[Object(r["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink(e.$sanitize(t.value))},Object(r["toDisplayString"])(e.$sanitize(t.value)),9,ft)])):this.isValidEmail(t.value)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("dd",Mt,[Object(r["createElementVNode"])("a",{href:"mailto:"+encodeURIComponent(t.value)},Object(r["toDisplayString"])(e.$sanitize(t.value)),9,Tt)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("dd",{key:2,innerHTML:e.$sanitize(t.value)},null,8,wt))],64)):Object(r["createCommentVNode"])("",!0)]))),128)):Object(r["createCommentVNode"])("",!0)],64))])]),e.pluginScreenshots.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Pt,[Ct,Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("Marketplace_Screenshots")),1),Object(r["createElementVNode"])("div",Dt,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.pluginScreenshots,e=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("figure",{key:"screenshot-"+e},[Object(r["createElementVNode"])("img",{src:e+"?w=800",width:"800",alt:""},null,8,At),Object(r["createElementVNode"])("figcaption",null,Object(r["toDisplayString"])(this.getScreenshotBaseName(e)),1)]))),128))])])):Object(r["createCommentVNode"])("",!0),e.pluginDocumentation?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",_t,[Lt,Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("General_Documentation")),1),Object(r["createElementVNode"])("div",{innerHTML:e.$sanitize(e.pluginDocumentation)},null,8,Ut)])):Object(r["createCommentVNode"])("",!0),e.pluginFaq?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",qt,[xt,Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("General_Faq")),1),Object(r["createElementVNode"])("div",{innerHTML:e.$sanitize(e.pluginFaq)},null,8,Ft)])):Object(r["createCommentVNode"])("",!0),e.showReviews?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Rt,[It,Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("Marketplace_Reviews")),1),Object(r["createElementVNode"])("iframe",{class:"reviewIframe",style:Object(r["normalizeStyle"])(e.pluginReviews.height?`height: ${e.pluginReviews.height}px;`:""),id:e.pluginReviews.embedUrl.replace(/[\W_]+/g," "),src:e.pluginReviews.embedUrl},null,12,$t)])):Object(r["createCommentVNode"])("",!0)],2),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["modal-content__footer",{"modal-content__footer--with-free-trial":e.showFreeTrialDropdown}])},[e.showFreeTrialDropdown&&e.isMatomoPlugin?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",Ht)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",Kt,[e.showFreeTrialDropdown?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",zt,[Object(r["createElementVNode"])("div",Gt,Object(r["toDisplayString"])(e.translate("Marketplace_TryFreeTrialTitle")),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{class:"free-trial-dropdown",title:`${e.translate("Marketplace_ShownPriceIsExclTax")} ${e.translate("Marketplace_CurrentNumPiwikUsers",e.numUsers)}`,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedPluginShopVariationUrl=t),onChange:t[2]||(t[2]=(...t)=>e.changeSelectedPluginShopVariationUrl&&e.changeSelectedPluginShopVariationUrl(...t))},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.plugin.shop.variations,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:"var-"+n,value:t.addToCartUrl,title:`${e.translate("Marketplace_PriceExclTax",t.price,t.currency)} ${e.translate("Marketplace_CurrentNumPiwikUsers",e.numUsers)}`},Object(r["toDisplayString"])(t.name)+" - "+Object(r["toDisplayString"])(t.prettyPrice)+" / "+Object(r["toDisplayString"])(t.period),9,Wt))),128))],40,Qt),[[r["vModelSelect"],e.selectedPluginShopVariationUrl]])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(b,{"is-super-user":e.isSuperUser,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-multi-server-environment":e.isMultiServerEnvironment,"is-valid-consumer":e.isValidConsumer,"is-auto-update-possible":e.isAutoUpdatePossible,"activate-nonce":e.activateNonce,"deactivate-nonce":e.deactivateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,plugin:e.plugin,"in-modal":!0,"shop-variation-url":e.selectedShopVariationUrl,onRequestTrial:t[3]||(t[3]=t=>e.emitTrialEvent("requestTrial")),onStartFreeTrial:t[4]||(t[4]=t=>e.emitTrialEvent("startFreeTrial"))},null,8,["is-super-user","is-plugins-admin-enabled","is-multi-server-environment","is-valid-consumer","is-auto-update-possible","activate-nonce","deactivate-nonce","install-nonce","update-nonce","plugin","shop-variation-url"])]),!e.showFreeTrialDropdown&&e.isMatomoPlugin?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",Jt)):Object(r["createCommentVNode"])("",!0)],2)],2))],512)}function Zt(e,t,n,l,a,i){return Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.plugin.missingRequirements||[],(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:n,class:"alert alert-danger"},Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_MissingRequirementsNotice",e.requirement(t.requirement),t.actualVersion,t.requiredVersion)),1))),128)}var Xt=Object(r["defineComponent"])({props:{plugin:{type:Object,required:!0}},methods:{requirement(e){return"php"===e?"PHP":`${e[0].toUpperCase()}${e.substr(1)}`}}});Xt.render=Zt;var en=Xt;function tn(){return tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},tn.apply(this,arguments)}const{$:nn}=window;var ln=Object(r["defineComponent"])({components:{MissingReqsNotice:en,CTAContainer:ge},props:{modelValue:{type:Object,default:()=>({})},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},installNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},isAutoUpdatePossible:{type:Boolean,required:!0},isValidConsumer:{type:Boolean,required:!0},isMultiServerEnvironment:{type:Boolean,required:!0},isPluginsAdminEnabled:{type:Boolean,required:!0},isSuperUser:{type:Boolean,required:!0},hasSomeAdminAccess:{type:Boolean,required:!0},numUsers:{type:Number,required:!0}},data(){return{isLoading:!0,currentPluginShopVariationUrl:""}},emits:["requestTrial","startFreeTrial","update:modelValue"],watch:{modelValue(e){e&&this.showPluginDetailsDialog()},isLoading(e){!1===e&&(this.applyExternalTarget(),this.applyIframeResize())}},computed:{plugin(){return this.modelValue},pluginLatestVersion(){const e=this.plugin.versions||[{}];return e[e.length-1]},pluginReadmeHtml(){var e;return(null===(e=this.pluginLatestVersion)||void 0===e?void 0:e.readmeHtml)||{}},pluginDescription(){var e;return(null===(e=this.pluginReadmeHtml)||void 0===e?void 0:e.description)||""},pluginDocumentation(){var e;return(null===(e=this.pluginReadmeHtml)||void 0===e?void 0:e.documentation)||""},pluginFaq(){var e;return(null===(e=this.pluginReadmeHtml)||void 0===e?void 0:e.faq)||""},pluginShop(){return this.plugin.shop},pluginShopVariations(){var e;return(null===(e=this.pluginShop)||void 0===e?void 0:e.variations)||[]},pluginReviews(){var e;return(null===(e=this.pluginShop)||void 0===e?void 0:e.reviews)||{}},pluginKeywords(){var e;return(null===(e=this.plugin)||void 0===e?void 0:e.keywords)||[]},pluginAuthors(){const e=this.plugin.authors||[];return e.filter(e=>e.name)},pluginActivity(){return this.plugin.activity||{}},pluginChangelogUrl(){return this.plugin.changelog.url||""},pluginSupport(){return this.plugin.support||[]},isMatomoPlugin(){return["piwik","matomo-org"].includes(this.plugin.owner)},pluginOwner(){return this.isMatomoPlugin?"Matomo":this.plugin.owner},showReviews(){return this.pluginReviews&&this.pluginReviews.embedUrl&&this.pluginReviews.averageRating},showMissingLicenseDescription(){return this.hasSomeAdminAccess&&this.plugin.isMissingLicense},showExceededLicenseDescription(){return this.hasSomeAdminAccess&&this.plugin.hasExceededLicense},showMissingRequirementsNoticeIfApplicable(){return this.isSuperUser&&(this.plugin.isDownloadable||this.plugin.isInstalled)},showLicenseName(){var e;const t=(null===(e=this.pluginLatestVersion)||void 0===e?void 0:e.license)||{};return!!t.name},showFreeTrialDropdown(){return this.isSuperUser&&!this.plugin.isMissingLicense&&!this.plugin.isInstalled&&!this.plugin.hasExceededLicense&&this.plugin.isEligibleForFreeTrial},pluginScreenshots(){return this.plugin.screenshots||[]},hasHeaderMetadata(){return this.showReviews||!this.plugin.isBundle||(this.plugin.numDownloads||0)>0||this.plugin.lastUpdated&&!this.plugin.isBundle},pluginShopVariationsPretty(){return this.pluginShopVariations.map(e=>`${e.name} - ${e.prettyPrice} / ${e.period}`)},pluginShopRecommendedVariation(){const e=this.pluginShopVariations.filter(e=>e.recommended),t=this.pluginShopVariations.length?this.pluginShopVariations[0]:null;return e.length?e[0]:t},selectedPluginShopVariationUrl(){var e;return this.currentPluginShopVariationUrl?this.currentPluginShopVariationUrl:(null===(e=this.pluginShopRecommendedVariation)||void 0===e?void 0:e.addToCartUrl)||""},selectedShopVariationUrl(){return this.selectedPluginShopVariationUrl||""}},methods:{changeSelectedPluginShopVariationUrl(e){e&&(this.currentPluginShopVariationUrl=e.target.value)},applyExternalTarget(){setTimeout(()=>{const e=this.$refs.root;nn(".modal-content__main a",e).each((e,t)=>{const n=nn(t).attr("href");n&&0===n.indexOf("http")&&nn(t).attr("target","_blank")})})},scrollElementIntoView(e){setTimeout(()=>{const t=this.$refs.root,n=nn(e,t);n.length&&n[0]&&n[0].scrollIntoView&&n[0].scrollIntoView({block:"nearest",behavior:"smooth"})})},isValidEmail(e){return e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},isValidHttpUrl(e){try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(t){return!1}},getProtocolAndDomain(e){const t=new URL(e);return`${t.protocol}//${t.hostname}`},applyIframeResize(){setTimeout(()=>{const{iFrameResize:e}=window;this.pluginReviews&&nn(()=>{const t=nn("#pluginDetailsModal iframe.reviewIframe");for(let n=0;n<t.length;n+=1)e({checkOrigin:[this.getProtocolAndDomain(this.pluginReviews.embedUrl)]},t[n])})})},getScreenshotBaseName(e){const t=e.split("/").pop()||"";return t.substring(0,t.lastIndexOf(".")).split("_").join(" ")},emitTrialEvent(e){const{plugin:t}=this;nn("#pluginDetailsModal").modal("close"),setTimeout(()=>{this.$emit(e,t)},250)},showPluginDetailsDialog(){nn("#pluginDetailsModal").modal({dismissible:!0,onCloseEnd:()=>{b["MatomoUrl"].updateHash(tn(tn({},b["MatomoUrl"].hashParsed.value),{},{showPlugin:null})),this.$emit("update:modelValue",null),this.isLoading=!0}}).modal("open"),setTimeout(()=>{this.isLoading=!1},10)},getPendingLicenseHelpText(e){return Object(b["translate"])("Marketplace_PluginLicenseStatusPending",e,Object(b["externalLink"])("https://shop.matomo.org/my-account/"),"</a>")},getCancelledLicenseHelpText(e){return Object(b["translate"])("Marketplace_PluginLicenseStatusCancelled",e,Object(b["externalLink"])("https://shop.matomo.org/my-account/"),"</a>")},getDownloadLinkMissingHelpText(e){return Object(b["translate"])("Marketplace_PluginDownloadLinkMissingDescription",e,Object(b["externalLink"])("https://matomo.org/faq/plugins/faq_21/"),"</a>")}}});ln.render=Yt;var an=ln;function rn(){return rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},rn.apply(this,arguments)}const{$:on}=window;var cn=Object(r["defineComponent"])({props:{currentUserEmail:String,pluginsToShow:{type:Array,required:!0},isAutoUpdatePossible:{type:Boolean,required:!0},isSuperUser:{type:Boolean,required:!0},isValidConsumer:{type:Boolean,required:!0},isMultiServerEnvironment:{type:Boolean,required:!0},isPluginsAdminEnabled:{type:Boolean,required:!0},hasSomeAdminAccess:{type:Boolean,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},installNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},numUsers:{type:Number,required:!0}},data(){return{showRequestTrialForPlugin:null,showStartFreeTrialForPlugin:null,showPluginDetailsForPlugin:null}},components:{PluginDetailsModal:an,CTAContainer:ge,RequestTrial:ve,StartFreeTrial:Fe},emits:["triggerUpdate","startTrialStart","startTrialStop"],watch:{pluginsToShow(e,t){e&&e!==t&&(this.shrinkDescriptionIfMultilineTitle(),this.parseShowPluginParameter())}},mounted(){on(window).resize(()=>{this.shrinkDescriptionIfMultilineTitle()}),Object(r["watch"])(()=>b["MatomoUrl"].hashParsed.value.showPlugin,(e,t)=>{e&&e!==t&&this.parseShowPluginParameter()}),this.parseShowPluginParameter()},methods:{parseShowPluginParameter(){const{showPlugin:e,pluginType:t,query:n}=b["MatomoUrl"].hashParsed.value;if(!e)return;const l=this.pluginsToShow.filter(t=>t.name===e);if(1===l.length){const[e]=l;this.openDetailsModal(e),this.scrollPluginCardIntoView(e)}else""===t&&""===n||b["MatomoUrl"].updateHash(rn(rn({},b["MatomoUrl"].hashParsed.value),{},{pluginType:"plugins",query:null}))},shrinkDescriptionIfMultilineTitle(){const e=on(".marketplace .card-holder");e&&e.length&&e.each((e,t)=>{const n=on(t),l=n.find(".card-title"),a=n.find(".card-content-bottom .alert"),r=n.hasClass("card-with-downloads");let i=1;if(l.length){const e=+l.height(),t=+l.css("line-height").replace("px","");var o;if(t)i=null!==(o=Math.ceil(e/t))&&void 0!==o?o:1}let c=0;if(a.length){const e=+a.height(),t=+a.css("line-height").replace("px","");var s;if(t)c=null!==(s=Math.ceil(e/t))&&void 0!==s?s:1}const u=n.find(".card-description");if(u.length){const e=u[0];let t=0;r?((i>=2||c>2||i+c>=4)&&(t=2),i+c>=5&&(t=1)):i+c>=5&&(t=2),t?e.setAttribute("data-clamp",""+t):e.removeAttribute("data-clamp")}})},clickCard(e,t){on(e.target).closest("a:not(.card-title-link)").length||(e.stopPropagation(),this.openDetailsModal(t))},openDetailsModal(e){this.showPluginDetailsForPlugin=e},scrollPluginCardIntoView(e){const t=on(`.pluginListContainer .card-title:contains("${e.displayName}")`);if(1!==t.length)return;const n=t.parents(".card");1===n.length&&n[0].scrollIntoView&&n[0].scrollIntoView({block:"start",behavior:"smooth"})},requestTrial(e){this.showRequestTrialForPlugin=e},startFreeTrial(e){this.showStartFreeTrialForPlugin=e}}});cn.render=U;var sn=cn;function un(){return un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},un.apply(this,arguments)}const dn=e=>`${e[0].toLowerCase()}${e.substring(1)}`;var pn=Object(r["defineComponent"])({props:{pluginTypeOptions:{type:Object,required:!0},defaultSort:{type:String,required:!0},pluginSortOptions:{type:Object,required:!0},numAvailablePluginsByType:{type:Object,required:!0},currentUserEmail:String,isValidConsumer:Boolean,isSuperUser:Boolean,isAutoUpdatePossible:Boolean,isPluginsAdminEnabled:Boolean,isMultiServerEnvironment:Boolean,hasSomeAdminAccess:Boolean,installNonce:{type:String,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},numUsers:{type:Number,required:!0}},components:{ContentBlock:b["ContentBlock"],PluginList:sn,Field:g["Field"]},data(){return{loading:!1,fetchRequest:null,fetchRequestAbortController:null,pluginSort:this.defaultSort,pluginTypeFilter:"plugins",searchQuery:"",pluginsToShow:[]}},emits:["triggerUpdate","startTrialStart","startTrialStop"],mounted(){b["Matomo"].postEvent("Marketplace.Marketplace.mounted",{element:this.$refs.root}),Object(r["watch"])(()=>b["MatomoUrl"].hashParsed.value,()=>{this.updateValuesFromHash(!1)}),this.updateValuesFromHash(!0)},unmounted(){b["Matomo"].postEvent("Marketplace.Marketplace.unmounted",{element:this.$refs.root})},methods:{updateValuesFromHash(e){let t=e;const n=b["MatomoUrl"].hashParsed.value.query||"",l=b["MatomoUrl"].hashParsed.value.sort||"",a=b["MatomoUrl"].hashParsed.value.pluginType||"";(n||this.searchQuery)&&(t=t||n!==this.searchQuery,this.searchQuery=n),l&&(t=t||l!==this.pluginSort,this.pluginSort=l),a&&(t=t||a!==this.pluginTypeFilter,this.pluginTypeFilter=a),t&&this.fetchPlugins()},updateQuery(e){b["MatomoUrl"].updateHash(un(un({},b["MatomoUrl"].hashParsed.value),{},{query:e}))},updateType(e){b["MatomoUrl"].updateHash(un(un({},b["MatomoUrl"].hashParsed.value),{},{pluginType:e}))},updateSort(e){b["MatomoUrl"].updateHash(un(un({},b["MatomoUrl"].hashParsed.value),{},{sort:e}))},updateMarketplace(){this.fetchPlugins(()=>this.$emit("triggerUpdate"))},fetchPlugins(e){this.loading=!0,this.pluginsToShow=[],this.fetchRequestAbortController&&(this.fetchRequestAbortController.abort(),this.fetchRequestAbortController=null),this.fetchRequestAbortController=new AbortController,this.fetchRequest=b["AjaxHelper"].post({module:"Marketplace",action:"searchPlugins",format:"JSON"},{query:this.searchQuery,sort:this.pluginSort,themesOnly:this.showThemes,purchaseType:"premium"===this.pluginTypeFilter?"paid":""},{withTokenInUrl:!0,abortController:this.fetchRequestAbortController}).then(t=>{this.pluginsToShow=t,"function"===typeof e&&e()}).finally(()=>{this.loading=!1,this.fetchRequestAbortController=null})}},computed:{queryInputTitle(){const e=dn(Object(b["translate"])("General_Plugins")),t=this.numAvailablePluginsByType[this.pluginTypeFilter]||0;return`${Object(b["translate"])("General_Search")} ${t} ${e}...`},loadingMessage(){return Object(b["translate"])("Mobile_LoadingReport",Object(b["translate"])(this.showThemes?"CorePluginsAdmin_Themes":"General_Plugins"))},showThemes(){return"themes"===this.pluginTypeFilter}}});pn.render=m;var mn=pn;const bn=["disabled"],gn={class:"ui-confirm",id:"installAllPaidPluginsAtOnce",ref:"installAllPaidPluginsAtOnce"},On=["data-href","value"],jn=["value"];function hn(e,t,n,l,a,i){const o=Object(r["resolveComponent"])("MatomoLoader");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("button",{class:"btn",onClick:t[0]||(t[0]=Object(r["withModifiers"])(t=>e.onInstallAllPaidPlugins(),["prevent"])),disabled:e.disabled},[e.loading?(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:0})):Object(r["createCommentVNode"])("",!0),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("Marketplace_InstallPurchasedPlugins")),1)],8,bn),Object(r["createElementVNode"])("div",gn,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("Marketplace_InstallAllPurchasedPlugins")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("Marketplace_InstallThesePlugins")),1),Object(r["createElementVNode"])("ul",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.paidPluginsToInstallAtOnce,e=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:e},Object(r["toDisplayString"])(e),1))),128))]),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("input",{role:"install",type:"button","data-href":e.installAllPaidPluginsLink,value:e.translate("Marketplace_InstallAllPurchasedPluginsAction",e.paidPluginsToInstallAtOnce.length)},null,8,On),Object(r["createElementVNode"])("input",{role:"cancel",type:"button",value:e.translate("General_Cancel")},null,8,jn)])],512)],64)}function kn(){return kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},kn.apply(this,arguments)}var yn=Object(r["defineComponent"])({components:{MatomoLoader:b["MatomoLoader"]},props:{paidPluginsToInstallAtOnce:{type:Array,required:!0},installNonce:{type:String,required:!0},loading:{type:Boolean,required:!0},disabled:{type:Boolean,required:!1,default:!1}},methods:{onInstallAllPaidPlugins(){b["Matomo"].helper.modalConfirm(this.$refs.installAllPaidPluginsAtOnce)}},computed:{installAllPaidPluginsLink(){return"?"+b["MatomoUrl"].stringify(kn(kn({},b["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"installAllPaidPlugins",nonce:this.installNonce}))}}});yn.render=hn;var vn=yn;const Nn=["innerHTML"],Vn={class:"manage-license-key-input"},En={class:"ui-confirm",id:"confirmRemoveLicense",ref:"confirmRemoveLicense"},Sn=["value"],Bn=["value"];function fn(e,t,n,l,a,i){const o=Object(r["resolveComponent"])("Field"),c=Object(r["resolveComponent"])("SaveButton"),s=Object(r["resolveComponent"])("ActivityIndicator"),u=Object(r["resolveComponent"])("ContentBlock");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(u,{"content-title":e.translate("Marketplace_LicenseKey"),class:"manage-license-key"},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",{class:"manage-license-key-intro",innerHTML:e.$sanitize(e.manageLicenseKeyIntro)},null,8,Nn),Object(r["createElementVNode"])("div",Vn,[Object(r["createVNode"])(o,{uicontrol:"text",name:"license_key",modelValue:e.licenseKey,"onUpdate:modelValue":t[0]||(t[0]=t=>e.licenseKey=t),placeholder:e.licenseKeyPlaceholder,"full-width":!0},null,8,["modelValue","placeholder"])]),Object(r["createVNode"])(c,{onConfirm:t[1]||(t[1]=t=>e.updateLicense()),value:e.saveButtonText,disabled:!e.licenseKey||e.isUpdating,id:"submit_license_key"},null,8,["value","disabled"]),e.hasValidLicense?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,id:"remove_license_key",onConfirm:t[2]||(t[2]=t=>e.removeLicense()),disabled:e.isUpdating,value:e.translate("General_Remove")},null,8,["disabled","value"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(s,{loading:e.isUpdating},null,8,["loading"])]),_:1},8,["content-title"]),Object(r["createElementVNode"])("div",En,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("Marketplace_ConfirmRemoveLicense")),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Sn),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Bn)],512)],64)}function Mn(){return Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Mn.apply(this,arguments)}var Tn=Object(r["defineComponent"])({props:{hasValidLicenseKey:Boolean},components:{Field:g["Field"],ContentBlock:b["ContentBlock"],SaveButton:g["SaveButton"],ActivityIndicator:b["ActivityIndicator"]},data(){return{licenseKey:"",hasValidLicense:this.hasValidLicenseKey,isUpdating:!1}},methods:{updateLicenseKey(e,t,n){b["NotificationsStore"].remove("ManageLicenseKeySuccess"),b["AjaxHelper"].post({module:"API",method:"Marketplace."+e,format:"JSON"},{licenseKey:this.licenseKey},{withTokenInUrl:!0}).then(t=>{this.isUpdating=!1,t&&t.value&&(b["NotificationsStore"].show({id:"ManageLicenseKeySuccess",message:n,context:"success",type:"toast"}),this.hasValidLicense="deleteLicenseKey"!==e,this.licenseKey="")},()=>{this.isUpdating=!1})},removeLicense(){b["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveLicense,{yes:()=>{this.isUpdating=!0,this.updateLicenseKey("deleteLicenseKey","",Object(b["translate"])("Marketplace_LicenseKeyDeletedSuccess"))}})},updateLicense(){this.isUpdating=!0,this.updateLicenseKey("saveLicenseKey",this.licenseKey,Object(b["translate"])("Marketplace_LicenseKeyActivatedSuccess"))}},computed:{manageLicenseKeyIntro(){const e="?"+b["MatomoUrl"].stringify(Mn(Mn({},b["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"overview"}));return Object(b["translate"])("Marketplace_ManageLicenseKeyIntro",`<a href="${e}">`,"</a>",Object(b["externalLink"])("https://shop.matomo.org/my-account"),"</a>")},licenseKeyPlaceholder(){return this.hasValidLicense?Object(b["translate"])("Marketplace_LicenseKeyIsValidShort"):Object(b["translate"])("Marketplace_LicenseKey")},saveButtonText(){return this.hasValidLicense?Object(b["translate"])("CoreUpdater_UpdateTitle"):Object(b["translate"])("Marketplace_ActivateLicenseKey")}}});Tn.render=fn;var wn=Tn;const Pn={class:"getNewPlugins"},Cn={class:"row"},Dn={class:"pluginName"},An=Object(r["createElementVNode"])("br",null,null,-1),_n={key:0},Ln=Object(r["createElementVNode"])("br",null,null,-1),Un=Object(r["createElementVNode"])("br",null,null,-1),qn=[Ln,Un],xn={class:"widgetBody"},Fn=["href"];function Rn(e,t,n,l,a,i){const o=Object(r["resolveDirective"])("plugin-name");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Pn,[Object(r["createElementVNode"])("div",Cn,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.plugins,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"col s12",key:t.name},[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("h3",Dn,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.displayName),1)])),[[o,{pluginName:t.name}]]),Object(r["createElementVNode"])("span",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.description)+" ",1),An,Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("a",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("General_MoreDetails")),1)])),[[o,{pluginName:t.name}]])]),n<e.plugins.length-1?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",_n,qn)):Object(r["createCommentVNode"])("",!0)]))),128))]),Object(r["createElementVNode"])("div",xn,[Object(r["createElementVNode"])("a",{href:e.overviewLink},Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,Fn)])])}function In(){return In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},In.apply(this,arguments)}var $n=Object(r["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:g["PluginName"]},computed:{overviewLink(){return"?"+b["MatomoUrl"].stringify(In(In({},b["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"overview"}))}}});$n.render=Rn;var Hn=$n;const Kn={class:"getNewPlugins isAdminPage",ref:"root"},zn={class:"row"},Gn=["title"],Qn=["title"],Wn={key:0},Jn=Object(r["createElementVNode"])("br",null,null,-1),Yn=["src"],Zn={class:"widgetBody"},Xn=["href"];function el(e,t,n,l,a,i){const o=Object(r["resolveDirective"])("plugin-name");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Kn,[Object(r["createElementVNode"])("div",zn,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.plugins,e=>{var t;return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"col s12 m4",key:e.name},[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("h3",{class:"pluginName",title:e.description},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.displayName),1)],8,Gn)),[[o,{pluginName:e.name}]]),Object(r["createElementVNode"])("p",{class:"description",title:e.description},Object(r["toDisplayString"])(e.description),9,Qn),null!==(t=e.screenshots)&&void 0!==t&&t.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Wn,[Jn,Object(r["withDirectives"])(Object(r["createElementVNode"])("img",{class:"screenshot",src:e.screenshots[0]+"?w=600",style:{width:"100%"},alt:""},null,8,Yn),[[o,{pluginName:e.name}]])])):Object(r["createCommentVNode"])("",!0)])}),128))]),Object(r["createElementVNode"])("div",Zn,[Object(r["createElementVNode"])("a",{href:e.marketplaceOverviewLink},Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,Xn)])],512)}var tl=Object(r["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:g["PluginName"]},computed:{marketplaceOverviewLink(){return"?"+b["MatomoUrl"].stringify({module:"Marketplace",action:"overview"})}}});tl.render=el;var nl=tl;const ll={class:"getNewPlugins getPremiumFeatures widgetBody"},al={key:0,class:"col s12 m12"},rl=["innerHTML"],il={style:{"margin-bottom":"28px",color:"#5bb75b"}},ol=Object(r["createElementVNode"])("i",{class:"icon-heart red-text"},null,-1),cl={class:"pluginName"},sl={key:0,class:"pluginSubtitle"},ul={class:"pluginBody"},dl=Object(r["createElementVNode"])("br",null,null,-1),pl={class:"pluginMoreDetails"},ml={class:"widgetBody"},bl=["href"];function gl(e,t,n,l,a,i){const o=Object(r["resolveDirective"])("plugin-name");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ll,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.pluginRows,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"row",key:n},[0===n?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",al,[Object(r["createElementVNode"])("h3",{style:{"font-weight":"bold",color:"#5bb75b"},innerHTML:e.$sanitize(e.trialHintsText)},null,8,rl),Object(r["createElementVNode"])("h3",il,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_SupportMatomoThankYou"))+" ",1),ol])])):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(t,t=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"col s12 m4",key:t.name},[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("h3",cl,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.displayName),1)])),[[o,{pluginName:t.name}]]),t.specialOffer?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",sl,[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.translate("Marketplace_SpecialOffer"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(t.specialOffer),1)])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("span",ul,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.isBundle?e.translate("Marketplace_SpecialOffer")+": ":"")+Object(r["toDisplayString"])(t.description)+" ",1),dl,Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("a",pl,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("General_MoreDetails")),1)])),[[o,{pluginName:t.name}]])])]))),128))]))),128)),Object(r["createElementVNode"])("div",ml,[Object(r["createElementVNode"])("a",{href:e.overviewLink},Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,bl)])])}var Ol=Object(r["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:g["PluginName"]},computed:{trialHintsText(){const e=Object(b["externalRawLink"])("https://shop.matomo.org/free-trial/"),t="color:#5bb75b;text-decoration: underline;";return Object(b["translate"])("Marketplace_TrialHints",`<a style="${t}" href="${e}" target="_blank" rel="noreferrer noopener">`,"</a>")},pluginRows(){const e=[];return this.plugins.forEach((t,n)=>{const l=Math.floor(n/3);e[l]=e[l]||[],e[l].push(t)}),e},overviewLink(){const e=b["MatomoUrl"].stringify({module:"Marketplace",action:"overview"}),t=b["MatomoUrl"].stringify({pluginType:"premium"});return`?${e}#?${t}`}}});Ol.render=gl;var jl=Ol;const hl={class:"marketplaceIntro"},kl={key:0},yl={key:1},vl={key:0,class:"installAllPaidPlugins"};function Nl(e,t,n,l,a,i){const o=Object(r["resolveComponent"])("EnrichedHeadline"),c=Object(r["resolveComponent"])("InstallAllPaidPluginsButton"),s=Object(r["resolveComponent"])("Marketplace"),u=Object(r["resolveDirective"])("content-intro");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("h2",null,[Object(r["createVNode"])(o,{"feature-name":e.translate("CorePluginsAdmin_Marketplace")},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_Marketplace")),1)]),_:1},8,["feature-name"])]),Object(r["createElementVNode"])("div",hl,[e.isSuperUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",yl,Object(r["toDisplayString"])(e.translate("Marketplace_IntroSuperUser")),1)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",kl,Object(r["toDisplayString"])(e.translate("Marketplace_Intro")),1))]),e.installAllPaidPluginsVisible?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",vl,[Object(r["createVNode"])(c,{"paid-plugins-to-install-at-once":e.getPaidPluginsToInstallAtOnce,"install-nonce":e.installNonce,disabled:e.installDisabled,loading:e.installLoading},null,8,["paid-plugins-to-install-at-once","install-nonce","disabled","loading"])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(s,{"plugin-type-options":e.pluginTypeOptions,"default-sort":e.defaultSort,"plugin-sort-options":e.pluginSortOptions,"num-available-plugins-by-type":e.numAvailablePluginsByType,"current-user-email":e.currentUserEmail,"is-auto-update-possible":e.isAutoUpdatePossible,"is-super-user":e.isSuperUser,"is-multi-server-environment":e.isMultiServerEnvironment,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"is-valid-consumer":e.getIsValidConsumer,"deactivate-nonce":e.deactivateNonce,"activate-nonce":e.activateNonce,"install-nonce":e.installNonce,"update-nonce":e.updateNonce,"has-some-admin-access":e.hasSomeAdminAccess,"num-users":e.numUsers,onTriggerUpdate:t[0]||(t[0]=e=>this.updateOverviewData()),onStartTrialStart:t[1]||(t[1]=e=>this.disableInstallAllPlugins(!0)),onStartTrialStop:t[2]||(t[2]=e=>this.disableInstallAllPlugins(!1))},null,8,["plugin-type-options","default-sort","plugin-sort-options","num-available-plugins-by-type","current-user-email","is-auto-update-possible","is-super-user","is-multi-server-environment","is-plugins-admin-enabled","is-valid-consumer","deactivate-nonce","activate-nonce","install-nonce","update-nonce","has-some-admin-access","num-users"])])),[[u]])}var Vl=Object(r["defineComponent"])({props:{currentUserEmail:String,inReportingMenu:Boolean,isValidConsumer:Boolean,isSuperUser:Boolean,isAutoUpdatePossible:Boolean,isPluginsAdminEnabled:Boolean,isMultiServerEnvironment:Boolean,hasSomeAdminAccess:Boolean,paidPluginsToInstallAtOnce:{type:Array,required:!0},installNonce:{type:String,required:!0},activateNonce:{type:String,required:!0},deactivateNonce:{type:String,required:!0},updateNonce:{type:String,required:!0},isPluginUploadEnabled:Boolean,uploadLimit:[String,Number],pluginTypeOptions:{type:Object,required:!0},defaultSort:{type:String,required:!0},pluginSortOptions:{type:Object,required:!0},numAvailablePluginsByType:{type:Object,required:!0},numUsers:{type:Number,required:!0}},components:{InstallAllPaidPluginsButton:vn,EnrichedHeadline:b["EnrichedHeadline"],Marketplace:mn},directives:{ContentIntro:b["ContentIntro"]},data(){return{updating:!1,fetchRequest:null,fetchRequestAbortController:null,updateData:null,installDisabled:!1,installLoading:!1}},computed:{getIsValidConsumer(){return this.updateData&&"undefined"!==typeof this.updateData.isValidConsumer?this.updateData.isValidConsumer:this.isValidConsumer},getPaidPluginsToInstallAtOnce(){return this.updateData&&"undefined"!==typeof this.updateData.paidPluginsToInstallAtOnce?this.updateData.paidPluginsToInstallAtOnce:this.paidPluginsToInstallAtOnce},installAllPaidPluginsVisible(){var e;return this.getIsValidConsumer&&this.isSuperUser&&this.isAutoUpdatePossible&&this.isPluginsAdminEnabled&&(null===(e=this.getPaidPluginsToInstallAtOnce)||void 0===e?void 0:e.length)||this.installDisabled&&this.installLoading},showThemes(){return"themes"===b["MatomoUrl"].hashParsed.value.pluginType}},methods:{disableInstallAllPlugins(e){this.installDisabled=!0,this.installLoading=e},enableInstallAllPlugins(){this.installDisabled=!1,this.installLoading=!1},updateOverviewData(){this.updating=!0,this.isSuperUser&&this.disableInstallAllPlugins(!0),this.fetchRequestAbortController&&(this.fetchRequestAbortController.abort(),this.fetchRequestAbortController=null),this.fetchRequestAbortController=new AbortController,this.fetchRequest=b["AjaxHelper"].post({module:"Marketplace",action:"updateOverview",format:"JSON"},{},{withTokenInUrl:!0,abortController:this.fetchRequestAbortController}).then(e=>{this.updateData=e}).finally(()=>{this.updating=!1,this.fetchRequestAbortController=null,this.enableInstallAllPlugins()})}}});Vl.render=Nl;var El=Vl;const Sl={key:0},Bl=["href"],fl=Object(r["createElementVNode"])("br",null,null,-1),Ml=Object(r["createElementVNode"])("br",null,null,-1),Tl=["innerHTML"],wl=Object(r["createElementVNode"])("br",null,null,-1),Pl={class:"subscriptionName"},Cl=["href"],Dl={key:1},Al={class:"subscriptionType"},_l=["title"],Ll={key:0,class:"icon-error"},Ul={key:1,class:"icon-warning"},ql={key:2,class:"icon-error"},xl={key:3,class:"icon-ok"},Fl=["title"],Rl=Object(r["createElementVNode"])("span",{class:"icon-error"},null,-1),Il={key:0},$l={colspan:"6"},Hl={class:"tableActionBar"},Kl=["href"],zl=Object(r["createElementVNode"])("span",{class:"icon-table"},null,-1),Gl={key:1},Ql=["innerHTML"];function Wl(e,t,n,l,a,i){const o=Object(r["resolveComponent"])("ContentBlock"),c=Object(r["resolveDirective"])("content-table");return Object(r["openBlock"])(),Object(r["createBlock"])(o,{"content-title":e.translate("Marketplace_OverviewPluginSubscriptions"),class:"subscriptionOverview"},{default:Object(r["withCtx"])(()=>[e.hasLicenseKey?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Sl,[Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Marketplace_PluginSubscriptionsList"))+" ",1),e.loginUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,target:"_blank",rel:"noreferrer noopener",href:e.loginUrl},Object(r["toDisplayString"])(e.translate("Marketplace_OverviewPluginSubscriptionsAllDetails")),9,Bl)):Object(r["createCommentVNode"])("",!0),fl,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("Marketplace_OverviewPluginSubscriptionsMissingInfo"))+" ",1),Ml,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("Marketplace_NoValidSubscriptionNoUpdates"))+" ",1),Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("Marketplace_CurrentNumPiwikUsers",`<strong>${e.numUsers}</strong>`))},null,8,Tl)]),wl,Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("table",null,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_Name")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Marketplace_SubscriptionType")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Status")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Marketplace_SubscriptionStartDate")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Marketplace_SubscriptionEndDate")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Marketplace_SubscriptionNextPaymentDate")),1)])]),Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.subscriptions||[],(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:n},[Object(r["createElementVNode"])("td",Pl,[t.plugin.htmlUrl?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,href:t.plugin.htmlUrl,rel:"noreferrer noopener",target:"_blank"},Object(r["toDisplayString"])(t.plugin.displayName),9,Cl)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Dl,Object(r["toDisplayString"])(t.plugin.displayName),1))]),Object(r["createElementVNode"])("td",Al,Object(r["toDisplayString"])(t.productType),1),Object(r["createElementVNode"])("td",{class:"subscriptionStatus",title:e.getSubscriptionStatusTitle(t)},[t.isValid?t.isExpiredSoon?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Ul)):""!==t.status&&"Active"!==t.status?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",ql)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",xl)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Ll)),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(t.status)+" ",1),t.isExceeded?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:4,class:"errorMessage",title:e.translate("Marketplace_LicenseExceededPossibleCause")},[Rl,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("Marketplace_Exceeded")),1)],8,Fl)):Object(r["createCommentVNode"])("",!0)],8,_l),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.start),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.isValid&&t.nextPayment?e.translate("Marketplace_LicenseRenewsNextPaymentDate"):t.end),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.nextPayment),1)]))),128)),e.subscriptions.length?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",Il,[Object(r["createElementVNode"])("td",$l,Object(r["toDisplayString"])(e.translate("Marketplace_NoSubscriptionsFound")),1)]))])])),[[c]]),Object(r["createElementVNode"])("div",Hl,[Object(r["createElementVNode"])("a",{href:e.marketplaceOverviewLink,class:""},[zl,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("Marketplace_BrowseMarketplace")),1)],8,Kl)])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Gl,[Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.missingLicenseText)},null,8,Ql)]))]),_:1},8,["content-title"])}var Jl=Object(r["defineComponent"])({props:{loginUrl:{type:String,required:!0},numUsers:{type:Number,required:!0},hasLicenseKey:Boolean,subscriptions:{type:Array,required:!0}},components:{ContentBlock:b["ContentBlock"]},directives:{ContentTable:b["ContentTable"]},methods:{getSubscriptionStatusTitle(e){return e.isValid?e.isExpiredSoon?Object(b["translate"])("Marketplace_SubscriptionExpiresSoon"):void 0:Object(b["translate"])("Marketplace_SubscriptionInvalid")}},computed:{marketplaceOverviewLink(){return"?"+b["MatomoUrl"].stringify({module:"Marketplace",action:"overview"})},missingLicenseText(){return Object(b["translate"])("Marketplace_OverviewPluginSubscriptionsMissingLicense",`<a href="${this.marketplaceOverviewLink}">`,"</a>")}}});Jl.render=Wl;var Yl=Jl;const Zl={class:"richMarketplaceMenuButton"},Xl=Object(r["createElementVNode"])("hr",null,null,-1),ea={class:"intro"},ta={class:"cta"},na=Object(r["createElementVNode"])("span",{class:"icon-marketplace"}," ",-1);function la(e,t,n,l,a,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Zl,[Xl,Object(r["createElementVNode"])("p",ea,Object(r["toDisplayString"])(e.translate("Marketplace_RichMenuIntro")),1),Object(r["createElementVNode"])("p",ta,[Object(r["createElementVNode"])("a",{class:"btn btn-outline",tabindex:"5",href:"",onClick:t[0]||(t[0]=Object(r["withModifiers"])(t=>e.$emit("action"),["prevent"])),onKeyup:t[1]||(t[1]=Object(r["withKeys"])(t=>e.$emit("action"),["enter"]))},[na,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("Marketplace_Marketplace")),1)],32)])])}var aa=Object(r["defineComponent"])({});aa.render=la;var ra=aa;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=Marketplace.umd.min.js.map