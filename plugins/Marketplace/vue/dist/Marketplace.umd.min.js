(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["Marketplace"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["Marketplace"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(l){if(t[l])return t[l].exports;var a=t[l]={i:l,l:!1,exports:{}};return e[l].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(l,a,function(t){return e[t]}.bind(null,a));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/Marketplace/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"Marketplace",(function(){return y})),n.d(t,"LicenseKey",(function(){return Q})),n.d(t,"ManageLicenseKey",(function(){return ne})),n.d(t,"GetNewPlugins",(function(){return Oe})),n.d(t,"GetNewPluginsAdmin",(function(){return Le})),n.d(t,"GetPremiumFeatures",(function(){return $e})),n.d(t,"MissingReqsNotice",(function(){return Qe})),n.d(t,"OverviewIntro",(function(){return lt})),n.d(t,"SubscriptionOverview",(function(){return Pt})),n.d(t,"RichMenuButton",(function(){return xt})),"undefined"!==typeof window){var l=window.document.currentScript,a=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(n.p=a[1])}var c=n("8bbf"),i={class:"row marketplaceActions",ref:"root"},r={class:"col s12 m6 l4"},o={class:"col s12 m6 l4"},s={key:0,class:"col s12 m12 l4 "},u=["action"];function d(e,t,n,l,a,d){var p,m=Object(c["resolveComponent"])("Field");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",i,[Object(c["createElementVNode"])("div",r,[Object(c["createVNode"])(m,{uicontrol:"select",name:"plugin_type","model-value":e.pluginTypeFilter,"onUpdate:modelValue":t[0]||(t[0]=function(t){e.pluginTypeFilter=t,e.changePluginType()}),title:e.translate("Marketplace_Show"),"full-width":!0,options:e.pluginTypeOptions},null,8,["model-value","title","options"])]),Object(c["createElementVNode"])("div",o,[Object(c["createVNode"])(m,{uicontrol:"select",name:"plugin_sort","model-value":e.pluginSort,"onUpdate:modelValue":t[1]||(t[1]=function(t){e.pluginSort=t,e.changePluginSort()}),title:e.translate("Marketplace_Sort"),"full-width":!0,options:e.pluginSortOptions},null,8,["model-value","title","options"])]),(null===(p=e.pluginsToShow)||void 0===p?void 0:p.length)>20||e.query?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",s,[Object(c["createElementVNode"])("form",{method:"post",class:"plugin-search",action:e.pluginSearchFormAction,ref:"pluginSearchForm"},[Object(c["createElementVNode"])("div",null,[Object(c["createVNode"])(m,{uicontrol:"text",name:"query",title:e.queryInputTitle,"full-width":!0,modelValue:e.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.searchQuery=t})},null,8,["title","modelValue"])]),Object(c["createElementVNode"])("span",{class:"icon-search",onClick:t[3]||(t[3]=function(t){return e.$refs.pluginSearchForm.submit()})})],8,u)])):Object(c["createCommentVNode"])("",!0)],512)}var p=n("19dc"),m=n("a5a2"),b=function(e){return"".concat(e[0].toLowerCase()).concat(e.substring(1))},O=window,j=O.$,g=Object(c["defineComponent"])({props:{pluginType:{type:String,required:!0},pluginTypeOptions:{type:[Object,Array],required:!0},sort:{type:String,required:!0},pluginSortOptions:{type:[Object,Array],required:!0},pluginsToShow:{type:Array,required:!0},query:{type:String,default:""},numAvailablePlugins:{type:Number,required:!0}},components:{Field:m["Field"]},data:function(){return{pluginSort:this.sort,pluginTypeFilter:this.pluginType,searchQuery:this.query}},mounted:function(){p["Matomo"].postEvent("Marketplace.Marketplace.mounted",{element:this.$refs.root})},unmounted:function(){p["Matomo"].postEvent("Marketplace.Marketplace.unmounted",{element:this.$refs.root})},created:function(){var e=function(e){var t=j(e);t&&t.length&&t.each((function(e,t){var n=j(t);n.off("click.cardClick"),n.on("click.cardClick",(function(e){if(!j(e.target).closest("a").length){var t=n.find("a.card-title-link");t&&(e.stopPropagation(),t.trigger("click"))}}))}))},t=Object(p["debounce"])((function(e){var t=j(e);t&&t.length&&t.each((function(e,t){var n=j(t),l=n.find(".card-title");if(l){var a,c=1,i=+l.height(),r=+l.css("line-height").replace("px","");if(r)c=null!==(a=Math.ceil(i/r))&&void 0!==a?a:1;var o=n.find(".card-description");c>1?o.addClass("card-description-clamped"):o.removeClass("card-description-clamped")}}))}),100);Object(c["nextTick"])((function(){var n=".marketplace .card-holder";e(n),t(n),j(window).resize((function(){t(n)}))}))},methods:{changePluginSort:function(){p["MatomoUrl"].updateUrl(Object.assign(Object.assign({},p["MatomoUrl"].urlParsed.value),{},{query:"",sort:this.pluginSort}),Object.assign(Object.assign({},p["MatomoUrl"].hashParsed.value),{},{query:"",sort:this.pluginSort}))},changePluginType:function(){p["MatomoUrl"].updateUrl(Object.assign(Object.assign({},p["MatomoUrl"].urlParsed.value),{},{query:"",show:this.pluginTypeFilter}),Object.assign(Object.assign({},p["MatomoUrl"].hashParsed.value),{},{query:"",show:this.pluginTypeFilter}))}},computed:{pluginSearchFormAction:function(){return"?".concat(p["MatomoUrl"].stringify(Object.assign(Object.assign({},p["MatomoUrl"].urlParsed.value),{},{sort:"",embed:"0"})),"#?").concat(p["MatomoUrl"].stringify(Object.assign(Object.assign({},p["MatomoUrl"].hashParsed.value),{},{sort:"",embed:"0",query:this.searchQuery})))},queryInputTitle:function(){var e=b(Object(p["translate"])("General_Plugins"));return"".concat(Object(p["translate"])("General_Search")," ").concat(this.numAvailablePlugins," ").concat(e,"...")}}});g.render=d;var y=g,v={class:"marketplace-max-width"},f={class:"marketplace-paid-intro"},k={key:0},h={key:0},N=Object(c["createElementVNode"])("br",null,null,-1),V={class:"licenseToolbar valign-wrapper"},M=["href"],E={key:0},S={class:"ui-confirm",id:"installAllPaidPluginsAtOnce",ref:"installAllPaidPluginsAtOnce"},B=Object(c["createElementVNode"])("br",null,null,-1),P=Object(c["createElementVNode"])("br",null,null,-1),L=["data-href","value"],w=["value"],T={key:1},C={key:0},_=["innerHTML"],U=Object(c["createElementVNode"])("br",null,null,-1),A={class:"licenseToolbar valign-wrapper"},x={key:1},D=["innerHTML"],K={class:"ui-confirm",id:"confirmRemoveLicense",ref:"confirmRemoveLicense"},q=["value"],I=["value"];function F(e,t,n,l,a,i){var r=Object(c["resolveComponent"])("DefaultLicenseKeyFields"),o=Object(c["resolveComponent"])("SaveButton"),s=Object(c["resolveComponent"])("ActivityIndicator");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",v,[Object(c["createElementVNode"])("div",f,[e.isValidConsumer?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",k,[e.isSuperUser?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",h,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("Marketplace_PaidPluginsWithLicenseKeyIntro",""))+" ",1),N,Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(r,{"model-value":e.licenseKey,"onUpdate:modelValue":t[0]||(t[0]=function(t){e.licenseKey=t,e.updatedLicenseKey()}),onConfirm:t[1]||(t[1]=function(t){return e.updateLicense()}),"has-license-key":e.hasLicenseKey,"is-valid-consumer":e.isValidConsumer,"enable-update":e.enableUpdate},null,8,["model-value","has-license-key","is-valid-consumer","enable-update"]),Object(c["createVNode"])(o,{class:"valign",id:"remove_license_key",onConfirm:t[2]||(t[2]=function(t){return e.removeLicense()}),value:e.translate("Marketplace_RemoveLicenseKey")},null,8,["value"]),Object(c["createElementVNode"])("a",{class:"btn valign",href:e.subscriptionOverviewLink},Object(c["toDisplayString"])(e.translate("Marketplace_ViewSubscriptions")),9,M),e.showInstallAllPaidPlugins?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",E,[Object(c["createElementVNode"])("a",{href:"",class:"btn installAllPaidPlugins valign",onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(t){return e.onInstallAllPaidPlugins()}),["prevent"]))},Object(c["toDisplayString"])(e.translate("Marketplace_InstallPurchasedPlugins")),1),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("Marketplace_InstallAllPurchasedPlugins")),1),Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("Marketplace_InstallThesePlugins"))+" ",1),B,P]),Object(c["createElementVNode"])("ul",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.paidPluginsToInstallAtOnce,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e},Object(c["toDisplayString"])(e),1)})),128))]),Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("input",{role:"install",type:"button","data-href":e.installAllPaidPluginsLink,value:e.translate("Marketplace_InstallAllPurchasedPluginsAction",e.paidPluginsToInstallAtOnce.length)},null,8,L),Object(c["createElementVNode"])("input",{role:"cancel",type:"button",value:e.translate("General_Cancel")},null,8,w)])],512)])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])(s,{loading:e.isUpdating},null,8,["loading"])])):Object(c["createCommentVNode"])("",!0)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",T,[e.isSuperUser?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",C,[Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.noLicenseKeyIntroText)},null,8,_),U,Object(c["createElementVNode"])("div",A,[Object(c["createVNode"])(r,{"model-value":e.licenseKey,"onUpdate:modelValue":t[4]||(t[4]=function(t){e.licenseKey=t,e.updatedLicenseKey()}),onConfirm:t[5]||(t[5]=function(t){return e.updateLicense()}),"has-license-key":e.hasLicenseKey,"is-valid-consumer":e.isValidConsumer,"enable-update":e.enableUpdate},null,8,["model-value","has-license-key","is-valid-consumer","enable-update"])]),Object(c["createVNode"])(s,{loading:e.isUpdating},null,8,["loading"])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",x,[Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.noLicenseKeyIntroNoSuperUserAccessText)},null,8,D)]))]))]),Object(c["createElementVNode"])("div",K,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("Marketplace_ConfirmRemoveLicense")),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,q),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,I)],512)])}var H={class:"valign licenseKeyText"};function R(e,t,n,l,a,i){var r=Object(c["resolveComponent"])("Field"),o=Object(c["resolveComponent"])("SaveButton");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",H,[Object(c["createVNode"])(r,{uicontrol:"text",name:"license_key","full-width":!0,"model-value":e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t)}),placeholder:e.licenseKeyPlaceholder},null,8,["model-value","placeholder"])]),Object(c["createVNode"])(o,{class:"valign",onConfirm:t[1]||(t[1]=function(t){return e.$emit("confirm")}),disabled:!e.enableUpdate,value:e.saveButtonText,id:"submit_license_key"},null,8,["disabled","value"])],64)}var $=Object(c["defineComponent"])({props:{modelValue:String,isValidConsumer:Boolean,hasLicenseKey:Boolean,enableUpdate:Boolean},emits:["update:modelValue","confirm"],components:{Field:m["Field"],SaveButton:m["SaveButton"]},computed:{licenseKeyPlaceholder:function(){return this.isValidConsumer?Object(p["translate"])("Marketplace_LicenseKeyIsValidShort"):Object(p["translate"])("Marketplace_LicenseKey")},saveButtonText:function(){return this.hasLicenseKey?Object(p["translate"])("CoreUpdater_UpdateTitle"):Object(p["translate"])("Marketplace_ActivateLicenseKey")}}});$.render=R;var G=$,z=Object(c["defineComponent"])({props:{isValidConsumer:Boolean,isSuperUser:Boolean,isAutoUpdatePossible:Boolean,isPluginsAdminEnabled:Boolean,hasLicenseKey:Boolean,paidPluginsToInstallAtOnce:{type:Array,required:!0},installNonce:{type:String,required:!0}},components:{SaveButton:m["SaveButton"],ActivityIndicator:p["ActivityIndicator"],DefaultLicenseKeyFields:G},data:function(){return{licenseKey:"",enableUpdate:!1,isUpdating:!1}},methods:{onInstallAllPaidPlugins:function(){p["Matomo"].helper.modalConfirm(this.$refs.installAllPaidPluginsAtOnce)},updateLicenseKey:function(e,t,n){var l=this;p["AjaxHelper"].post({module:"API",method:"Marketplace.".concat(e),format:"JSON"},{licenseKey:this.licenseKey},{withTokenInUrl:!0}).then((function(e){l.isUpdating=!1,e&&e.value&&(p["NotificationsStore"].show({message:n,context:"success",type:"transient"}),p["Matomo"].helper.redirect())}),(function(){l.isUpdating=!1}))},removeLicense:function(){var e=this;p["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveLicense,{yes:function(){e.enableUpdate=!1,e.isUpdating=!0,e.updateLicenseKey("deleteLicenseKey","",Object(p["translate"])("Marketplace_LicenseKeyDeletedSuccess"))}})},updatedLicenseKey:function(){this.enableUpdate=!!this.licenseKey},updateLicense:function(){this.enableUpdate=!1,this.isUpdating=!0,this.updateLicenseKey("saveLicenseKey",this.licenseKey,Object(p["translate"])("Marketplace_LicenseKeyActivatedSuccess"))}},computed:{subscriptionOverviewLink:function(){return"?".concat(p["MatomoUrl"].stringify(Object.assign(Object.assign({},p["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"subscriptionOverview"})))},noLicenseKeyIntroText:function(){return Object(p["translate"])("Marketplace_PaidPluginsNoLicenseKeyIntro",Object(p["externalLink"])("https://matomo.org/recommends/premium-plugins/"),"</a>")},noLicenseKeyIntroNoSuperUserAccessText:function(){return Object(p["translate"])("Marketplace_PaidPluginsNoLicenseKeyIntroNoSuperUserAccess",Object(p["externalLink"])("https://matomo.org/recommends/premium-plugins/"),"</a>")},installAllPaidPluginsLink:function(){return"?".concat(p["MatomoUrl"].stringify(Object.assign(Object.assign({},p["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"installAllPaidPlugins",nonce:this.installNonce})))},showInstallAllPaidPlugins:function(){return this.isAutoUpdatePossible&&this.isPluginsAdminEnabled&&this.paidPluginsToInstallAtOnce.length}}});z.render=F;var Q=z,W=["innerHTML"],Y={class:"manage-license-key-input"},J={class:"ui-confirm",id:"confirmRemoveLicense",ref:"confirmRemoveLicense"},X=["value"],Z=["value"];function ee(e,t,n,l,a,i){var r=Object(c["resolveComponent"])("Field"),o=Object(c["resolveComponent"])("SaveButton"),s=Object(c["resolveComponent"])("ActivityIndicator"),u=Object(c["resolveComponent"])("ContentBlock");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(u,{"content-title":e.translate("Marketplace_LicenseKey"),class:"manage-license-key"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",{class:"manage-license-key-intro",innerHTML:e.$sanitize(e.manageLicenseKeyIntro)},null,8,W),Object(c["createElementVNode"])("div",Y,[Object(c["createVNode"])(r,{uicontrol:"text",name:"license_key",modelValue:e.licenseKey,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.licenseKey=t}),placeholder:e.licenseKeyPlaceholder,"full-width":!0},null,8,["modelValue","placeholder"])]),Object(c["createVNode"])(o,{onConfirm:t[1]||(t[1]=function(t){return e.updateLicense()}),value:e.saveButtonText,disabled:!e.licenseKey||e.isUpdating,id:"submit_license_key"},null,8,["value","disabled"]),e.hasValidLicense?(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:0,id:"remove_license_key",onConfirm:t[2]||(t[2]=function(t){return e.removeLicense()}),disabled:e.isUpdating,value:e.translate("General_Remove")},null,8,["disabled","value"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(s,{loading:e.isUpdating},null,8,["loading"])]})),_:1},8,["content-title"]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("Marketplace_ConfirmRemoveLicense")),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,X),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Z)],512)],64)}var te=Object(c["defineComponent"])({props:{hasValidLicenseKey:Boolean},components:{Field:m["Field"],ContentBlock:p["ContentBlock"],SaveButton:m["SaveButton"],ActivityIndicator:p["ActivityIndicator"]},data:function(){return{licenseKey:"",hasValidLicense:this.hasValidLicenseKey,isUpdating:!1}},methods:{updateLicenseKey:function(e,t,n){var l=this;p["NotificationsStore"].remove("ManageLicenseKeySuccess"),p["AjaxHelper"].post({module:"API",method:"Marketplace.".concat(e),format:"JSON"},{licenseKey:this.licenseKey},{withTokenInUrl:!0}).then((function(t){l.isUpdating=!1,t&&t.value&&(p["NotificationsStore"].show({id:"ManageLicenseKeySuccess",message:n,context:"success",type:"toast"}),l.hasValidLicense="deleteLicenseKey"!==e,l.licenseKey="")}),(function(){l.isUpdating=!1}))},removeLicense:function(){var e=this;p["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveLicense,{yes:function(){e.isUpdating=!0,e.updateLicenseKey("deleteLicenseKey","",Object(p["translate"])("Marketplace_LicenseKeyDeletedSuccess"))}})},updateLicense:function(){this.isUpdating=!0,this.updateLicenseKey("saveLicenseKey",this.licenseKey,Object(p["translate"])("Marketplace_LicenseKeyActivatedSuccess"))}},computed:{manageLicenseKeyIntro:function(){var e="?".concat(p["MatomoUrl"].stringify(Object.assign(Object.assign({},p["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"overview"})));return Object(p["translate"])("Marketplace_ManageLicenseKeyIntro",'<a href="'.concat(e,'">'),"</a>",Object(p["externalLink"])("https://shop.matomo.org/my-account"),"</a>")},licenseKeyPlaceholder:function(){return this.hasValidLicense?Object(p["translate"])("Marketplace_LicenseKeyIsValidShort"):Object(p["translate"])("Marketplace_LicenseKey")},saveButtonText:function(){return this.hasValidLicense?Object(p["translate"])("CoreUpdater_UpdateTitle"):Object(p["translate"])("Marketplace_ActivateLicenseKey")}}});te.render=ee;var ne=te,le={class:"getNewPlugins"},ae={class:"row"},ce={class:"pluginName"},ie=Object(c["createElementVNode"])("br",null,null,-1),re={key:0},oe=Object(c["createElementVNode"])("br",null,null,-1),se=Object(c["createElementVNode"])("br",null,null,-1),ue=[oe,se],de={class:"widgetBody"},pe=["href"];function me(e,t,n,l,a,i){var r=Object(c["resolveDirective"])("plugin-name");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",le,[Object(c["createElementVNode"])("div",ae,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.plugins,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"col s12",key:t.name},[Object(c["withDirectives"])(Object(c["createElementVNode"])("h3",ce,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.displayName),1)],512),[[r,{pluginName:t.name}]]),Object(c["createElementVNode"])("span",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.description)+" ",1),ie,Object(c["withDirectives"])(Object(c["createElementVNode"])("a",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("General_MoreDetails")),1)],512),[[r,{pluginName:t.name}]])]),n<e.plugins.length-1?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",re,ue)):Object(c["createCommentVNode"])("",!0)])})),128))]),Object(c["createElementVNode"])("div",de,[Object(c["createElementVNode"])("a",{href:e.overviewLink},Object(c["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,pe)])])}var be=Object(c["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:m["PluginName"]},computed:{overviewLink:function(){return"?".concat(p["MatomoUrl"].stringify(Object.assign(Object.assign({},p["MatomoUrl"].urlParsed.value),{},{module:"Marketplace",action:"overview"})))}}});be.render=me;var Oe=be,je={class:"getNewPlugins isAdminPage",ref:"root"},ge={class:"row"},ye=["title"],ve=["title"],fe={key:0},ke=Object(c["createElementVNode"])("br",null,null,-1),he=["src"],Ne={class:"widgetBody"},Ve=["href"];function Me(e,t,n,l,a,i){var r=Object(c["resolveDirective"])("plugin-name");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",je,[Object(c["createElementVNode"])("div",ge,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.plugins,(function(e){var t;return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"col s12 m4",key:e.name},[Object(c["withDirectives"])(Object(c["createElementVNode"])("h3",{class:"pluginName",title:e.description},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.displayName),1)],8,ye),[[r,{pluginName:e.name}]]),Object(c["createElementVNode"])("p",{class:"description",title:e.description},Object(c["toDisplayString"])(e.description),9,ve),null!==(t=e.screenshots)&&void 0!==t&&t.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",fe,[ke,Object(c["withDirectives"])(Object(c["createElementVNode"])("img",{class:"screenshot",src:"".concat(e.screenshots[0],"?w=600"),style:{width:"100%"},alt:""},null,8,he),[[r,{pluginName:e.name}]])])):Object(c["createCommentVNode"])("",!0)])})),128))]),Object(c["createElementVNode"])("div",Ne,[Object(c["createElementVNode"])("a",{href:e.marketplaceOverviewLink},Object(c["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,Ve)])],512)}var Ee=window,Se=Ee.$;function Be(e){Se(".col .description",e).dotdotdot({watch:"window"})}var Pe=Object(c["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:m["PluginName"]},mounted:function(){Be(this.$refs.root)},updated:function(){Be(this.$refs.root)},computed:{marketplaceOverviewLink:function(){return"?".concat(p["MatomoUrl"].stringify({module:"Marketplace",action:"overview"}))}}});Pe.render=Me;var Le=Pe,we={class:"getNewPlugins getPremiumFeatures widgetBody"},Te={key:0,class:"col s12 m12"},Ce=["innerHTML"],_e={style:{"margin-bottom":"28px",color:"#5bb75b"}},Ue=Object(c["createElementVNode"])("i",{class:"icon-heart red-text"},null,-1),Ae={class:"pluginName"},xe={key:0,class:"pluginSubtitle"},De={class:"pluginBody"},Ke=Object(c["createElementVNode"])("br",null,null,-1),qe={class:"pluginMoreDetails"},Ie={class:"widgetBody"},Fe=["href"];function He(e,t,n,l,a,i){var r=Object(c["resolveDirective"])("plugin-name");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",we,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.pluginRows,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"row",key:n},[0===n?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Te,[Object(c["createElementVNode"])("h3",{style:{"font-weight":"bold",color:"#5bb75b"},innerHTML:e.$sanitize(e.trialHintsText)},null,8,Ce),Object(c["createElementVNode"])("h3",_e,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("Marketplace_SupportMatomoThankYou"))+" ",1),Ue])])):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"col s12 m4",key:t.name},[Object(c["withDirectives"])(Object(c["createElementVNode"])("h3",Ae,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.displayName),1)],512),[[r,{pluginName:t.name}]]),t.specialOffer?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",xe,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.translate("Marketplace_SpecialOffer"))+":",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.specialOffer),1)])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",De,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.isBundle?"".concat(e.translate("Marketplace_SpecialOffer"),": "):"")+Object(c["toDisplayString"])(t.description)+" ",1),Ke,Object(c["withDirectives"])(Object(c["createElementVNode"])("a",qe,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("General_MoreDetails")),1)],512),[[r,{pluginName:t.name}]])])])})),128))])})),128)),Object(c["createElementVNode"])("div",Ie,[Object(c["createElementVNode"])("a",{href:e.overviewLink},Object(c["toDisplayString"])(e.translate("CorePluginsAdmin_ViewAllMarketplacePlugins")),9,Fe)])])}var Re=Object(c["defineComponent"])({props:{plugins:{type:Array,required:!0}},directives:{PluginName:m["PluginName"]},computed:{trialHintsText:function(){var e=Object(p["externalRawLink"])("https://shop.matomo.org/free-trial/"),t="color:#5bb75b;text-decoration: underline;";return Object(p["translate"])("Marketplace_TrialHints",'<a style="'.concat(t,'" href="').concat(e,'" target="_blank" rel="noreferrer noopener">'),"</a>")},pluginRows:function(){var e=[];return this.plugins.forEach((function(t,n){var l=Math.floor(n/3);e[l]=e[l]||[],e[l].push(t)})),e},overviewLink:function(){return"?".concat(p["MatomoUrl"].stringify({module:"Marketplace",action:"overview",show:"premium"}))}}});Re.render=He;var $e=Re;function Ge(e,t,n,l,a,i){return Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.plugin.missingRequirements||[],(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:n,class:"alert alert-danger"},Object(c["toDisplayString"])(e.translate("CorePluginsAdmin_MissingRequirementsNotice",e.requirement(t.requirement),t.actualVersion,t.requiredVersion)),1)})),128)}var ze=Object(c["defineComponent"])({props:{plugin:{type:Object,required:!0}},methods:{requirement:function(e){return"php"===e?"PHP":"".concat(e[0].toUpperCase()).concat(e.substr(1))}}});ze.render=Ge;var Qe=ze,We={key:0},Ye={key:1},Je=["innerHTML"],Xe={key:2},Ze=["innerHTML"],et=["innerHTML"];function tt(e,t,n,l,a,i){var r=Object(c["resolveComponent"])("EnrichedHeadline"),o=Object(c["resolveComponent"])("LicenseKey"),s=Object(c["resolveComponent"])("UploadPluginDialog"),u=Object(c["resolveComponent"])("Marketplace"),d=Object(c["resolveDirective"])("content-intro");return Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createElementVNode"])("h2",null,[Object(c["createVNode"])(r,{"feature-name":e.translate("CorePluginsAdmin_Marketplace")},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("Marketplace_Marketplace")),1)]})),_:1},8,["feature-name"])]),Object(c["createElementVNode"])("p",null,[e.isSuperUser?e.showThemes?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Ye,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("CorePluginsAdmin_ThemesDescription"))+" ",1),Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.installingNewThemeText)},null,8,Je)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Xe,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("CorePluginsAdmin_PluginsExtendPiwik"))+" ",1),Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.installingNewPluginText)},null,8,Ze)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",We,Object(c["toDisplayString"])(e.showThemes?e.translate("Marketplace_NotAllowedToBrowseMarketplaceThemes"):e.translate("Marketplace_NotAllowedToBrowseMarketplacePlugins")),1)),e.isSuperUser&&e.inReportingMenu?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:3,ref:"noticeRemoveMarketplaceFromMenu",innerHTML:e.$sanitize(e.noticeRemoveMarketplaceFromMenuText)},null,8,et)):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])(o,{"is-valid-consumer":e.isValidConsumer,"is-super-user":e.isSuperUser,"is-auto-update-possible":e.isAutoUpdatePossible,"is-plugins-admin-enabled":e.isPluginsAdminEnabled,"has-license-key":e.hasLicenseKey,"paid-plugins-to-install-at-once":e.paidPluginsToInstallAtOnce,"install-nonce":e.installNonce},null,8,["is-valid-consumer","is-super-user","is-auto-update-possible","is-plugins-admin-enabled","has-license-key","paid-plugins-to-install-at-once","install-nonce"]),Object(c["createVNode"])(s,{"is-plugin-upload-enabled":e.isPluginUploadEnabled,"upload-limit":e.uploadLimit,"install-nonce":e.installNonce},null,8,["is-plugin-upload-enabled","upload-limit","install-nonce"]),Object(c["createVNode"])(u,{"plugin-type":e.pluginType,"plugin-type-options":e.pluginTypeOptions,sort:e.sort,"plugin-sort-options":e.pluginSortOptions,"plugins-to-show":e.pluginsToShow,query:e.query,"num-available-plugins":e.numAvailablePlugins},null,8,["plugin-type","plugin-type-options","sort","plugin-sort-options","plugins-to-show","query","num-available-plugins"])],512)),[[d]])}var nt=Object(c["defineComponent"])({props:{showThemes:Boolean,inReportingMenu:Boolean,isValidConsumer:Boolean,isSuperUser:Boolean,isAutoUpdatePossible:Boolean,isPluginsAdminEnabled:Boolean,hasLicenseKey:Boolean,paidPluginsToInstallAtOnce:{type:Array,required:!0},installNonce:{type:String,required:!0},isPluginUploadEnabled:Boolean,uploadLimit:[String,Number],pluginType:{type:String,required:!0},pluginTypeOptions:{type:[Object,Array],required:!0},sort:{type:String,required:!0},pluginSortOptions:{type:[Object,Array],required:!0},pluginsToShow:{type:Array,required:!0},query:{type:String,default:""},numAvailablePlugins:{type:Number,required:!0}},components:{EnrichedHeadline:p["EnrichedHeadline"],UploadPluginDialog:m["UploadPluginDialog"],LicenseKey:Q,Marketplace:y},directives:{ContentIntro:p["ContentIntro"],PluginName:m["PluginName"]},mounted:function(){if(this.$refs.noticeRemoveMarketplaceFromMenu){var e=this.$refs.noticeRemoveMarketplaceFromMenu.querySelector("[matomo-plugin-name]");m["PluginName"].mounted(e,{dir:{},instance:null,modifiers:{},oldValue:null,value:{pluginName:"WhiteLabel"}})}},beforeUnmount:function(){if(this.$refs.noticeRemoveMarketplaceFromMenu){var e=this.$refs.noticeRemoveMarketplaceFromMenu.querySelector("[matomo-plugin-name]");m["PluginName"].unmounted(e,{dir:{},instance:null,modifiers:{},oldValue:null,value:{pluginName:"WhiteLabel"}})}},computed:{installingNewThemeText:function(){return Object(p["translate"])("Marketplace_InstallingNewThemesViaMarketplaceOrUpload",'<a href="#" class="uploadPlugin">',"</a>")},installingNewPluginText:function(){return Object(p["translate"])("Marketplace_InstallingNewPluginsViaMarketplaceOrUpload",'<a href="#" class="uploadPlugin">',"</a>")},noticeRemoveMarketplaceFromMenuText:function(){return Object(p["translate"])("Marketplace_NoticeRemoveMarketplaceFromReportingMenu",'<a href="#" matomo-plugin-name="WhiteLabel">',"</a>")}}});nt.render=tt;var lt=nt,at={key:0},ct=["href"],it=Object(c["createElementVNode"])("br",null,null,-1),rt=Object(c["createElementVNode"])("br",null,null,-1),ot=["innerHTML"],st=Object(c["createElementVNode"])("br",null,null,-1),ut={class:"subscriptionName"},dt=["href"],pt={key:1},mt={class:"subscriptionType"},bt=["title"],Ot={key:0,class:"icon-error"},jt={key:1,class:"icon-warning"},gt={key:2,class:"icon-ok"},yt=["title"],vt=Object(c["createElementVNode"])("span",{class:"icon-error"},null,-1),ft={key:0},kt={colspan:"6"},ht={class:"tableActionBar"},Nt=["href"],Vt=Object(c["createElementVNode"])("span",{class:"icon-table"},null,-1),Mt={key:1},Et=["innerHTML"];function St(e,t,n,l,a,i){var r=Object(c["resolveComponent"])("ContentBlock"),o=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createBlock"])(r,{"content-title":e.translate("Marketplace_OverviewPluginSubscriptions"),class:"subscriptionOverview"},{default:Object(c["withCtx"])((function(){return[e.hasLicenseKey?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",at,[Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("Marketplace_PluginSubscriptionsList"))+" ",1),e.loginUrl?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:0,target:"_blank",rel:"noreferrer noopener",href:e.loginUrl},Object(c["toDisplayString"])(e.translate("Marketplace_OverviewPluginSubscriptionsAllDetails")),9,ct)):Object(c["createCommentVNode"])("",!0),it,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("Marketplace_OverviewPluginSubscriptionsMissingInfo"))+" ",1),rt,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("Marketplace_NoValidSubscriptionNoUpdates"))+" ",1),Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("Marketplace_CurrentNumPiwikUsers","<strong>".concat(e.numUsers,"</strong>")))},null,8,ot)]),st,Object(c["withDirectives"])(Object(c["createElementVNode"])("table",null,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("General_Name")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Marketplace_SubscriptionType")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("CorePluginsAdmin_Status")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Marketplace_SubscriptionStartDate")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Marketplace_SubscriptionEndDate")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Marketplace_SubscriptionNextPaymentDate")),1)])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.subscriptions||[],(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:n},[Object(c["createElementVNode"])("td",ut,[t.plugin.htmlUrl?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:0,href:t.plugin.htmlUrl,rel:"noreferrer noopener",target:"_blank"},Object(c["toDisplayString"])(t.plugin.displayName),9,dt)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",pt,Object(c["toDisplayString"])(t.plugin.displayName),1))]),Object(c["createElementVNode"])("td",mt,Object(c["toDisplayString"])(t.productType),1),Object(c["createElementVNode"])("td",{class:"subscriptionStatus",title:e.getSubscriptionStatusTitle(t)},[t.isValid?t.isExpiredSoon?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",jt)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",gt)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Ot)),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.status)+" ",1),t.isExceeded?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:3,class:"errorMessage",title:e.translate("Marketplace_LicenseExceededPossibleCause")},[vt,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("Marketplace_Exceeded")),1)],8,yt)):Object(c["createCommentVNode"])("",!0)],8,bt),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.start),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.isValid&&t.nextPayment?e.translate("Marketplace_LicenseRenewsNextPaymentDate"):t.end),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.nextPayment),1)])})),128)),e.subscriptions.length?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",ft,[Object(c["createElementVNode"])("td",kt,Object(c["toDisplayString"])(e.translate("Marketplace_NoSubscriptionsFound")),1)]))])],512),[[o]]),Object(c["createElementVNode"])("div",ht,[Object(c["createElementVNode"])("a",{href:e.marketplaceOverviewLink,class:""},[Vt,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("Marketplace_BrowseMarketplace")),1)],8,Nt)])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Mt,[Object(c["createElementVNode"])("p",{innerHTML:e.$sanitize(e.missingLicenseText)},null,8,Et)]))]})),_:1},8,["content-title"])}var Bt=Object(c["defineComponent"])({props:{loginUrl:{type:String,required:!0},numUsers:{type:Number,required:!0},hasLicenseKey:Boolean,subscriptions:{type:Array,required:!0}},components:{ContentBlock:p["ContentBlock"]},directives:{ContentTable:p["ContentTable"]},methods:{getSubscriptionStatusTitle:function(e){return e.isValid?e.isExpiredSoon?Object(p["translate"])("Marketplace_SubscriptionExpiresSoon"):void 0:Object(p["translate"])("Marketplace_SubscriptionInvalid")}},computed:{marketplaceOverviewLink:function(){return"?".concat(p["MatomoUrl"].stringify({module:"Marketplace",action:"overview"}))},missingLicenseText:function(){return Object(p["translate"])("Marketplace_OverviewPluginSubscriptionsMissingLicense",'<a href="'.concat(this.marketplaceOverviewLink,'">'),"</a>")}}});Bt.render=St;var Pt=Bt,Lt={class:"richMarketplaceMenuButton"},wt=Object(c["createElementVNode"])("hr",null,null,-1),Tt={class:"intro"},Ct={class:"cta"},_t=Object(c["createElementVNode"])("span",{class:"icon-marketplace"},"Â ",-1);function Ut(e,t,n,l,a,i){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Lt,[wt,Object(c["createElementVNode"])("p",Tt,Object(c["toDisplayString"])(e.translate("Marketplace_RichMenuIntro")),1),Object(c["createElementVNode"])("p",Ct,[Object(c["createElementVNode"])("a",{class:"btn btn-outline",tabindex:"5",href:"",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(t){return e.$emit("action")}),["prevent"])),onKeyup:t[1]||(t[1]=Object(c["withKeys"])((function(t){return e.$emit("action")}),["enter"]))},[_t,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("Marketplace_Marketplace")),1)],32)])])}var At=Object(c["defineComponent"])({});At.render=Ut;var xt=At;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=Marketplace.umd.min.js.map